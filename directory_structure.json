{
    "__files__": {
        ".env.local": null,
        ".eslintrc.json": null,
        ".gitignore": null,
        "codes.py": null,
        "components.json": null,
        "directory_structure.json": null,
        "favicon.ico": null,
        "next-env.d.ts": "/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.\n",
        "next.config.mjs": null,
        "package-lock.json": null,
        "package.json": null,
        "postcss.config.mjs": null,
        "README.md": null,
        "tailwind.config.ts": "import type { Config } from \"tailwindcss\"\n\nconst config: Config = {\n  darkMode: [\"class\"],\n  content: [\n    \"./pages/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./components/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./app/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"*.{js,ts,jsx,tsx,mdx}\",\n  ],\n  theme: {\n    container: {\n      center: true,\n      padding: \"2rem\",\n      screens: {\n        \"2xl\": \"1400px\",\n      },\n    },\n    extend: {\n      colors: {\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n      },\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n        fadeIn: {\n          \"0%\": { opacity: \"0\" },\n          \"100%\": { opacity: \"1\" },\n        },\n        slideUp: {\n          \"0%\": { transform: \"translateY(10px)\", opacity: \"0\" },\n          \"100%\": { transform: \"translateY(0)\", opacity: \"1\" },\n        },\n      },\n      backdropBlur: {\n        xs: \"2px\",\n      },\n      animation: {\n        \"fade-in\": \"fadeIn 0.5s ease-in-out\",\n        \"slide-up\": \"slideUp 0.3s ease-out\",\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\")],\n}\n\nexport default config\n",
        "tsconfig.json": null
    },
    "app": {
        "__files__": {
            "globals.css": null,
            "icon.ico": null,
            "layout.tsx": "// app/layout.tsx\nimport type React from \"react\"\nimport type { Metadata } from \"next\"\nimport { Inter } from \"next/font/google\"\nimport \"./globals.css\"\nimport { AuthProvider } from \"@/components/auth-provider\"\nimport { Toaster } from \"sonner\"\nimport { Footer } from \"@/components/Footer\"\n\nconst inter = Inter({ subsets: [\"latin\"] })\n\nexport const metadata: Metadata = {\n  title: \"GameSync\",\n  description: \"GameSync platform for scheduling games\",\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"ko\" className=\"min-h-screen dark\">\n      <head>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n        <link rel=\"manifest\" href=\"/manifest.json\" />\n      </head>\n      <body\n        suppressHydrationWarning={true}\n        className={`${inter.className} flex flex-col min-h-screen bg-background text-foreground antialiased selection:bg-primary/20 selection:text-foreground`}\n      >\n        <AuthProvider>\n          {children}\n          <Toaster\n            theme=\"dark\"\n            position=\"top-right\"\n            toastOptions={{\n              style: {\n                background: \"rgba(255, 255, 255, 0.1)\",\n                backdropFilter: \"blur(12px)\",\n                border: \"1px solid rgba(255, 255, 255, 0.2)\",\n                color: \"white\",\n              },\n            }}\n          />\n          <Footer />\n        </AuthProvider>\n      </body>\n    </html>\n  )\n}\n",
            "page.tsx": "import { redirect } from \"next/navigation\"\nimport { cookies } from \"next/headers\"\nimport GameSyncLanding from \"@/components/GameSyncLanding\"\n\nexport default async function HomePage() {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"auth-token\")\n\n  if (token) {\n    redirect(\"/dashboard\")\n  }\n  return <GameSyncLanding />\n}\n"
        },
        "auth": {
            "discord": {
                "callback": {
                    "__files__": {
                        "ClientCallback.tsx": "// app/(auth)/auth/discord/callback/ClientCallback.tsx\n\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { authService } from \"@/lib/auth-service\";\nimport { toast } from \"sonner\";\n\nexport default function ClientCallback() {\n  const router = useRouter();\n  const params = useSearchParams();\n  const token = params.get(\"token\");\n  const userParam = params.get(\"user\");\n\n  useEffect(() => {\n    if (token && userParam) {\n      authService.setToken(token);\n      let userObj;\n      try {\n        userObj = JSON.parse(decodeURIComponent(userParam));\n      } catch {\n        router.replace(\"/auth/login\");\n        return;\n      }\n      authService.setCurrentUser(userObj);\n      if (userObj?.existingUser) {\n        toast.success(\"디스코드 계정으로 로그인했습니다.\");\n      } else if (userObj?.linkedByEmail) {\n        toast.success(\"기존 계정에 디스코드가 연동되었습니다.\");\n      } else if (userObj?.newlyCreated) {\n        toast.success(\"디스코드 계정으로 새 계정이 생성되었습니다.\");\n      }\n      router.replace(\"/dashboard\");\n    } else {\n      router.replace(\"/auth/login\");\n    }\n  }, [token, userParam, router]);\n\n  return <div>처리 중입니다…</div>;\n}\n",
                        "page.tsx": "// app/(auth)/auth/discord/callback/page.tsx\n// 서버 컴포넌트입니다.\n\nexport const dynamic = \"force-dynamic\";\n\nimport ClientCallback from \"./ClientCallback\";\n\nexport default function Page() {\n  return <ClientCallback />;\n}\n"
                    }
                }
            },
            "login": {
                "__files__": {
                    "page.tsx": "\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { toast } from \"sonner\"\nimport { authService } from \"@/lib/auth-service\"\nimport { Loader2, GamepadIcon } from \"lucide-react\"\nimport { DiscordIcon } from \"@/components/icons/discord-icon\"\n\nexport default function LoginPage() {\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [isLoading, setIsLoading] = useState(false)\n  const [isDiscordLoading, setIsDiscordLoading] = useState(false)\n  const router = useRouter()\n\n  useEffect(() => {\n    if (authService.isAuthenticated()) {\n      router.replace(\"/dashboard\")\n    }\n  }, [router])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n\n    try {\n      await authService.login({ username, password })\n      toast.success(\"로그인 성공\", {\n        description: \"환영합니다!\",\n      })\n      router.push(\"/dashboard\")\n    } catch (error) {\n      toast.error(\"로그인 실패\", {\n        description: \"아이디 또는 비밀번호를 확인해주세요.\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleDiscordLogin = () => {\n    setIsDiscordLoading(true)\n    // Discord 로그인 페이지로 리다이렉트하기 전에 로딩 상태 표시\n    window.location.href = `${process.env.NEXT_PUBLIC_API_URL!.replace(/\\/api$/, \"\")}/oauth2/authorization/discord`\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4 bg-background\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 glass rounded-2xl mb-4\">\n            <GamepadIcon className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-foreground mb-2\">GameSync</h1>\n          <p className=\"text-muted-foreground\">게임 스케줄링 플랫폼에 로그인하세요</p>\n        </div>\n\n        <Card className=\"glass border-white/10\">\n          <CardHeader>\n            <CardTitle className=\"text-foreground\">로그인</CardTitle>\n            <CardDescription className=\"text-muted-foreground\">계정 정보를 입력해주세요</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Discord 로그인 버튼 */}\n            <Button\n              onClick={handleDiscordLogin}\n              disabled={isDiscordLoading || isLoading}\n              className=\"w-full bg-none !bg-[#5865F2] hover:!bg-[#4752C4] text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed focus-visible:ring-2 focus-visible:ring-[#5865F2]/50\"\n            >\n              {isDiscordLoading ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  <span>Discord 연결 중...</span>\n                </>\n              ) : (\n                <>\n                  <DiscordIcon className=\"w-5 h-5\" />\n                  <span>Discord로 계속하기</span>\n                </>\n              )}\n            </Button>\n\n            {/* 구분선 */}\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <span className=\"w-full border-t border-white/20\" />\n              </div>\n              <div className=\"relative flex justify-center text-xs uppercase\">\n                <span className=\"bg-transparent px-2 text-muted-foreground\">또는</span>\n              </div>\n            </div>\n\n            {/* 일반 로그인 폼 */}\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"username\" className=\"text-foreground\">\n                  로그인 아이디\n                </Label>\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  className=\"glass border-white/10 text-foreground placeholder:text-muted-foreground focus:border-white/20 focus:ring-white/10\"\n                  placeholder=\"로그인 아이디를 입력하세요\"\n                  required\n                  disabled={isDiscordLoading}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\" className=\"text-foreground\">\n                  비밀번호\n                </Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"glass border-white/10 text-foreground placeholder:text-muted-foreground focus:border-white/20 focus:ring-white/10\"\n                  placeholder=\"비밀번호를 입력하세요\"\n                  required\n                  disabled={isDiscordLoading}\n                />\n              </div>\n              <Button\n                type=\"submit\"\n                className=\"w-full glass-button font-medium py-3\"\n                disabled={isLoading || isDiscordLoading}\n              >\n                {isLoading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    로그인 중...\n                  </>\n                ) : (\n                  \"로그인\"\n                )}\n              </Button>\n            </form>\n\n            <div className=\"text-center\">\n              <p className=\"text-muted-foreground text-sm\">\n                계정이 없으신가요?{\" \"}\n                <Link\n                  href=\"/auth/signup\"\n                  className=\"text-muted-foreground hover:text-foreground underline font-medium transition-colors\"\n                >\n                  회원가입\n                </Link>\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n"
                }
            },
            "signup": {
                "__files__": {
                    "page.tsx": "\"use client\"\n\nimport type React from \"react\"\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { toast } from \"sonner\"\nimport { authService } from \"@/lib/auth-service\"\nimport { Loader2, GamepadIcon } from \"lucide-react\"\nimport { DiscordIcon } from \"@/components/icons/discord-icon\"\n\nexport default function SignupPage() {\n  const [username, setUsername] = useState(\"\")\n  const [nickname, setNickname] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [confirmPassword, setConfirmPassword] = useState(\"\")\n  const [isLoading, setIsLoading] = useState(false)\n  const [isDiscordLoading, setIsDiscordLoading] = useState(false)\n  const router = useRouter()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    // 아이디 유효성 검사\n    if (username.length < 3 || username.length > 20) {\n      toast.error(\"아이디 길이 오류\", {\n        description: \"아이디는 3자 이상 20자 이하로 입력해주세요.\",\n      })\n      return\n    }\n    if (!/^[a-zA-Z0-9_]+$/.test(username)) {\n      toast.error(\"아이디 형식 오류\", {\n        description: \"아이디는 영문, 숫자, 밑줄(_)만 사용할 수 있습니다.\",\n      })\n      return\n    }\n\n    // 사용자명 유효성 검사\n    if (nickname.length < 2 || nickname.length > 30) {\n      toast.error(\"사용자명 길이 오류\", {\n        description: \"사용자명은 2자 이상 30자 이하로 입력해주세요.\",\n      })\n      return\n    }\n\n    // 비밀번호 유효성 검사\n    if (password.length < 8) {\n      toast.error(\"비밀번호 길이 오류\", {\n        description: \"비밀번호는 최소 8자 이상이어야 합니다.\",\n      })\n      return\n    }\n\n    if (password !== confirmPassword) {\n      toast.error(\"비밀번호 확인 오류\", {\n        description: \"비밀번호가 일치하지 않습니다.\",\n      })\n      return\n    }\n\n    setIsLoading(true)\n\n    try {\n      await authService.signup({ username, password, nickname })\n      toast.success(\"회원가입 성공\", {\n        description: \"계정이 생성되었습니다. 로그인해주세요.\",\n      })\n      router.push(\"/auth/login\")\n    } catch (error) {\n      toast.error(\"회원가입 실패\", {\n        description: \"다시 시도해주세요.\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleDiscordSignup = () => {\n    setIsDiscordLoading(true)\n    window.location.href = `${process.env.NEXT_PUBLIC_API_URL!.replace(/\\/api$/, \"\")}/oauth2/authorization/discord`\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4 bg-background\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 glass rounded-2xl mb-4\">\n            <GamepadIcon className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-foreground mb-2\">GameSync</h1>\n          <p className=\"text-muted-foreground\">게임 스케줄링 플랫폼에 가입하세요</p>\n        </div>\n\n        <Card className=\"glass border-white/10\">\n          <CardHeader>\n            <CardTitle className=\"text-foreground\">회원가입</CardTitle>\n            <CardDescription className=\"text-muted-foreground\">새 계정을 만들어보세요</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Discord 회원가입 버튼 */}\n            <Button\n              onClick={handleDiscordSignup}\n              disabled={isDiscordLoading || isLoading}\n              className=\"w-full bg-none !bg-[#5865F2] hover:!bg-[#4752C4] text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed focus-visible:ring-2 focus-visible:ring-[#5865F2]/50\"\n            >\n              {isDiscordLoading ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  <span>Discord 연결 중...</span>\n                </>\n              ) : (\n                <>\n                  <DiscordIcon className=\"w-5 h-5\" />\n                  <span>Discord로 계속하기</span>\n                </>\n              )}\n            </Button>\n\n            {/* 구분선 */}\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <span className=\"w-full border-t border-white/20\" />\n              </div>\n              <div className=\"relative flex justify-center text-xs uppercase\">\n                <span className=\"bg-transparent px-2 text-muted-foreground\">또는</span>\n              </div>\n            </div>\n\n            {/* 일반 회원가입 폼 */}\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"username\" className=\"text-foreground\">\n                  로그인 아이디 (3~20자, 영문,숫자)\n                </Label>\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  minLength={3}\n                  maxLength={20}\n                  pattern=\"^[a-zA-Z0-9_]+$\"\n                  title=\"3~20자 영문, 숫자, 밑줄(_)만 가능\"\n                  className=\"glass border-white/10 text-foreground placeholder:text-muted-foreground focus:border-white/20 focus:ring-white/10\"\n                  placeholder=\"로그인 아이디를 입력하세요\"\n                  required\n                  disabled={isDiscordLoading}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"nickname\" className=\"text-foreground\">\n                  사용자명 (2~30자)\n                </Label>\n                <Input\n                  id=\"nickname\"\n                  type=\"text\"\n                  value={nickname}\n                  onChange={(e) => setNickname(e.target.value)}\n                  minLength={2}\n                  maxLength={30}\n                  title=\"2~30자 사이로 입력해주세요\"\n                  className=\"glass border-white/10 text-foreground placeholder:text-muted-foreground focus:border-white/20 focus:ring-white/10\"\n                  placeholder=\"사용자명을 입력하세요\"\n                  required\n                  disabled={isDiscordLoading}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\" className=\"text-foreground\">\n 비밀번호 (최소 8자)\n</Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  minLength={8}\n                  title=\"비밀번호는 최소 8자 이상이어야 합니다.\"\n                  className=\"glass border-white/10 text-foreground placeholder:text-muted-foreground focus:border-white/20 focus:ring-white/10\"\n                  placeholder=\"비밀번호를 입력하세요\"\n                  required\n                  disabled={isDiscordLoading}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirmPassword\" className=\"text-foreground\">\n                  비밀번호 확인\n                </Label>\n                <Input\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  minLength={8}\n                  title=\"비밀번호를 다시 입력하세요\"\n                  className=\"glass border-white/10 text-foreground placeholder:text-muted-foreground focus:border-white/20 focus:ring-white/10\"\n                  placeholder=\"비밀번호를 다시 입력하세요\"\n                  required\n                  disabled={isDiscordLoading}\n                />\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full glass-button font-medium py-3\"\n                disabled={isLoading || isDiscordLoading}\n              >\n                {isLoading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    가입 중...\n                  </>\n                ) : (\n                  \"회원가입\"\n                )}\n              </Button>\n            </form>\n\n            <div className=\"text-center\">\n              <p className=\"text-muted-foreground text-sm\">\n                이미 계정이 있으신가요? {\" \"}\n                <Link\n                  href=\"/auth/login\"\n                  className=\"text-muted-foreground hover:text-foreground underline font-medium transition-colors\"\n                >\n                  로그인\n                </Link>\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n"
                }
            }
        },
        "dashboard": {
            "__files__": {
                "page.tsx": "'use client';\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { toast } from \"sonner\";\nimport { serverService, Server as IServer } from \"@/lib/server-service\";\nimport { authService } from \"@/lib/auth-service\";\nimport { CreateServerModal } from \"@/components/create-server-modal\";\nimport { JoinByCodeModal } from \"@/components/join-by-code-modal\";\nimport { Navbar } from \"@/components/navbar\";\nimport { Plus, Users, Clock, Flame, Star } from \"lucide-react\";\nimport { useProtectedRoute } from \"@/app/hooks/useProtectedRoute\";\n\nexport default function DashboardPage() {\n  useProtectedRoute();\n\n  const [servers, setServers] = useState<IServer[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showJoinModal, setShowJoinModal] = useState(false);\n  const router = useRouter();\n\n  useEffect(() => {\n    loadServers();\n  }, []);\n\n  const loadServers = async () => {\n    setIsLoading(true);\n    try {\n      const data = await serverService.getMyServers();\n      setServers(data);\n    } catch {\n      toast.error(\"서버 로드 실패\", {\n        description: \"내 서버 정보를 불러오는데 실패했습니다.\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleServerCreated = (newServer: IServer) => {\n    setServers((prev) => [...prev, newServer]);\n    setShowCreateModal(false);\n    toast.success(\"서버 생성 완료\", {\n      description: `${newServer.name} 서버가 생성되었습니다.`,\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen\">\n        <Navbar />\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"text-white\">로딩 중...</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const currentUserId = authService.getCurrentUserId();\n  const featuredServers = servers.slice(0, 3);\n  const otherServers = servers.slice(3);\n\n  return (\n    <div className=\"min-h-screen\">\n      <Navbar />\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* 헤더: 모바일에서 세로, 데스크탑에서 가로 */}\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-8 space-y-4 sm:space-y-0\">\n          <div>\n            <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 text-white/80 mb-3\">\n              <Flame className=\"w-4 h-4 text-orange-300\" />\n              <span className=\"text-xs\">내 서버 허브</span>\n            </div>\n            <h1 className=\"text-3xl font-bold text-white mb-1\">대시보드</h1>\n            <p className=\"text-white/70\">내가 참여한 서버를 한눈에 모아보세요</p>\n          </div>\n          <div className=\"flex flex-col sm:flex-row gap-2 w-full sm:w-auto\">\n            <Button\n              onClick={() => setShowJoinModal(true)}\n              className=\"w-full sm:w-auto glass-button hover:bg-white/20 h-12 px-6\"\n            >\n              초대 코드로 참가\n            </Button>\n            <Button\n              onClick={() => setShowCreateModal(true)}\n              className=\"w-full sm:w-auto glass-button hover:bg-white/20 h-12 px-6\"\n            >\n              <Plus className=\"mr-2 h-4 w-4\" />서버 생성\n            </Button>\n          </div>\n        </div>\n\n        {/* 추천 서버 (상위 1~3개) */}\n        {featuredServers.length > 0 && (\n          <div className=\"mb-10\">\n            <div className=\"flex items-center gap-2 mb-3\">\n              <Star className=\"w-4 h-4 text-yellow-300\" />\n              <span className=\"text-white/80 text-sm\">추천 서버</span>\n            </div>\n            <div className=\"flex gap-4 overflow-x-auto pb-2\">\n              {featuredServers.map((server) => {\n                const isOwner = server.ownerId === currentUserId;\n                return (\n                  <div key={server.id} className=\"min-w-[280px] md:min-w-[320px]\">\n                    <Card className=\"relative glass border-white/20 bg-gradient-to-br from-white/10 to-white/5 hover:from-white/20 hover:to-white/10 transition-all duration-300 shadow-xl\">\n                      <CardHeader className=\"pb-2\">\n                        <div className=\"flex items-center justify-between\">\n                          <CardTitle className=\"text-white text-xl\">{server.name}</CardTitle>\n                          <Badge variant=\"secondary\" className=\"glass text-yellow-300\">\n                            {isOwner ? \"소유자\" : \"멤버\"}\n                          </Badge>\n                        </div>\n                        <CardDescription className=\"text-white/70\">서버장: {server.owner}</CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"flex items-center justify-between text-white/80\">\n                          <div className=\"flex items-center\">\n                            <Users className=\"mr-2 h-4 w-4\" />\n                            <span>{server.members.length}명</span>\n                          </div>\n                          <div className=\"flex items-center\">\n                            <Clock className=\"mr-2 h-4 w-4\" />\n                            <span>{server.resetTime}</span>\n                          </div>\n                        </div>\n                        <div className=\"mt-4\">\n                          <Button\n                            onClick={() => router.push(`/server/${server.id}`)}\n                            className=\"w-full glass-button hover:bg-white/20\"\n                          >\n                            입장\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n\n        {/* 모든 서버 */}\n        <div className=\"flex items-center gap-2 mb-3\">\n          <span className=\"text-white/80 text-sm\">모든 서버</span>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n          {(otherServers.length > 0 ? otherServers : servers).map((server) => {\n            const isOwner = server.ownerId === currentUserId;\n            return (\n              <Card\n                key={server.id}\n                className=\"glass bg-white/10 border-white/20 hover:bg-white/20 hover:shadow-lg hover:shadow-white/10 transition-all duration-300\"\n              >\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-white\">{server.name}</CardTitle>\n                    <Badge variant=\"secondary\" className=\"glass text-yellow-300\">\n                      {isOwner ? \"소유자\" : \"멤버\"}\n                    </Badge>\n                  </div>\n                  <CardDescription className=\"text-white/70\">서버장: {server.owner}</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center text-white/80\">\n                      <Users className=\"mr-2 h-4 w-4\" />\n                      <span>{server.members.length}명 참여</span>\n                    </div>\n                    <div className=\"flex items-center justify-between text-white/80\">\n                      <div className=\"flex items-center\">\n                        <Clock className=\"mr-2 h-4 w-4\" />\n                        <span>초기화: {server.resetTime}</span>\n                      </div>\n                      <Button\n                        onClick={() => router.push(`/server/${server.id}`)}\n                        className=\"glass-button hover:bg-white/20 h-15 px-8\"\n                        size=\"sm\"\n                      >\n                        입장\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n\n        {/* 서버가 없을 때 */}\n          {servers.length === 0 && (\n            <div className=\"text-center py-12\">\n              <div className=\"glass max-w-md mx-auto p-8\">\n                <h3 className=\"text-xl font-semibold text-white mb-2\">\n                  서버가 없습니다\n                </h3>\n                <p className=\"text-white/70 mb-6\">\n                  초대 코드를 입력하거나 새 서버를 생성하세요.\n                </p>\n                <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center\">\n                  <Button\n                    onClick={() => setShowJoinModal(true)}\n                    className=\"w-full sm:w-auto glass-button hover:bg-white/20 h-12 px-6\"\n                  >\n                    초대 코드로 참가\n                  </Button>\n                  <Button\n                    onClick={() => setShowCreateModal(true)}\n                    className=\"w-full sm:w-auto glass-button hover:bg-white/20 h-12 px-6\"\n                  >\n                    서버 생성\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n      </div>\n\n      {/* 모달 컴포넌트 */}\n      <CreateServerModal\n        open={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        onServerCreated={handleServerCreated}\n      />\n      <JoinByCodeModal\n        open={showJoinModal}\n        onClose={() => setShowJoinModal(false)}\n        onJoinSuccess={loadServers}\n      />\n    </div>\n  );\n}\n"
            }
        },
        "demo": {
            "scenes": {}
        },
        "fonts": {
            "__files__": {
                "GeistMonoVF.woff": null,
                "GeistVF.woff": null
            }
        },
        "hooks": {
            "__files__": {
                "useProtectedRoute.ts": "\"use client\"\nimport { useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { authService } from \"@/lib/auth-service\"\n\nexport function useProtectedRoute() {\n  const router = useRouter()\n  useEffect(() => {\n    if (!authService.isAuthenticated()) {\n      router.replace(\"/auth/login\")\n    }\n  }, [router])\n}\n"
            }
        },
        "server": {
            "[id]": {
                "__files__": {
                    "page.tsx": "'use client'\n\nimport React, { useEffect, useState } from \"react\"\nimport { useParams, useRouter } from \"next/navigation\"\nimport { Navbar } from \"@/components/navbar\"\nimport { TimetableView } from \"@/components/timetable-view\"\nimport { ServerOverview } from \"@/components/server-overview\"\nimport { GameManagement } from \"@/components/game-management\"\nimport { toast } from \"sonner\"\nimport { serverService, Server as IServer } from \"@/lib/server-service\"\nimport { Card, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { useProtectedRoute } from \"@/app/hooks/useProtectedRoute\"\n\nasync function copyText(text: string) {\n  if (navigator.clipboard?.writeText) {\n    return navigator.clipboard.writeText(text)\n  } else {\n    const textarea = document.createElement(\"textarea\")\n    textarea.value = text\n    textarea.style.position = \"fixed\"\n    textarea.style.opacity = \"0\"\n    document.body.appendChild(textarea)\n    textarea.focus()\n    textarea.select()\n    document.execCommand(\"copy\")\n    document.body.removeChild(textarea)\n    return Promise.resolve()\n  }\n}\n\nexport default function ServerDetailPage() {\n  useProtectedRoute()\n  const params = useParams()\n  const router = useRouter()\n  const serverId = Number(params.id)\n\n  const [server, setServer] = useState<IServer | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    loadServer()\n  }, [serverId])\n\n  async function loadServer() {\n    try {\n      const data = await serverService.getServer(serverId)\n      setServer(data)\n    } catch {\n      toast.error(\"서버 정보 로드 실패\", {\n        description: \"서버 정보를 불러오는데 실패했습니다.\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen\">\n        <Navbar />\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"text-white\">로딩 중...</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!server) {\n    return (\n      <div className=\"min-h-screen\">\n        <Navbar />\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center py-12\">\n            <h2 className=\"text-2xl font-bold text-white mb-2\">\n              서버를 찾을 수 없습니다\n            </h2>\n            <p className=\"text-white/70\">\n              요청한 서버가 존재하지 않거나 접근 권한이 없습니다.\n            </p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const currentUser = localStorage.getItem(\"current-user\")\n  const isOwner = server.owner === currentUser\n\n  return (\n    <div className=\"min-h-screen\">\n      <Navbar />\n      <div className=\"container mx-auto px-4 py-6\">\n        {/* 서버 정보 카드 */}\n        <Card className=\"glass border-white/20 mb-6\">\n          <CardHeader className=\"space-y-1\">\n            <CardTitle className=\"text-3xl font-bold text-white\">\n              {server.name}\n            </CardTitle>\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 w-full\">\n              <CardDescription className=\"text-white/70\">\n                서버장: {server.owner}\n              </CardDescription>\n              <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-2 w-full sm:w-auto\">\n                <CardDescription className=\"text-white/70\">\n                  초대코드 {server.inviteCode}\n                </CardDescription>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full sm:w-auto glass border-white/30 text-white hover:bg-black/10 hover:text-white\"\n                  onClick={async () => {\n                    try {\n                      await copyText(server.inviteCode)\n                      toast.success(\"초대 코드가 복사되었습니다\")\n                    } catch {\n                      toast.error(\"초대 코드 복사 실패\")\n                    }\n                  }}\n                >\n                  복사\n                </Button>\n              </div>\n            </div>\n          </CardHeader>\n        </Card>\n\n        {/* 메인 레이아웃: 모바일은 세로, 데스크탑은 9:3 컬럼 */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n          <div className=\"lg:col-span-9\">\n            <TimetableView serverId={serverId} />\n          </div>\n          <div className=\"lg:col-span-3 flex flex-col gap-6\">\n            <ServerOverview\n              server={server}\n              onServerUpdate={(s) => setServer(s)}\n            />\n            <GameManagement serverId={serverId} />\n            {!isOwner && (\n              <Button\n                variant=\"destructive\"\n                className=\"w-full mt-2 glass-button\"\n                onClick={async () => {\n                  if (!confirm(\"이 서버를 떠나시겠습니까?\")) return\n                  try {\n                    await serverService.leaveServer(serverId)\n                    toast.success(\"서버를 떠났습니다\")\n                    router.push(\"/dashboard\")\n                  } catch {\n                    toast.error(\"서버 떠나기 실패\")\n                  }\n                }}\n              >\n                서버 떠나기\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"
                }
            }
        },
        "stats": {
            "[id]": {
                "__files__": {
                    "page.tsx": "\"use client\"\n\nimport { useState, useEffect, useMemo } from \"react\"\nimport { useParams } from \"next/navigation\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Navbar } from \"@/components/navbar\"\nimport { toast } from \"sonner\"\nimport { timetableService } from \"@/lib/timetable-service\"\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  Tooltip as ReTooltip,\n  ResponsiveContainer,\n  LineChart,\n  Line,\n  CartesianGrid,\n  PieChart,\n  Pie,\n  Cell,\n  Legend,\n} from \"recharts\"\nimport { Trophy, Clock, TrendingUp, Users } from \"lucide-react\"\nimport { useProtectedRoute } from \"@/app/hooks/useProtectedRoute\"\n\ninterface Stats {\n  topGame: string\n  avgSlot: string\n  peakSlot: string\n  peakCount: number\n}\n\nexport default function StatsPage() {\n  useProtectedRoute()\n  const params = useParams()\n  const serverId = Number.parseInt(params.id as string)\n  const [stats, setStats] = useState<Stats | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [entries, setEntries] = useState<Array<{ slot: string; gameName: string; user: string }>>([])\n\n  useEffect(() => {\n    loadAll()\n  }, [serverId])\n\n  const loadAll = async () => {\n    try {\n      const data = await timetableService.getStats(serverId)\n      setStats(data)\n      const list = await timetableService.getTimetable(serverId)\n      setEntries(list)\n    } catch (error) {\n      toast.error(\"통계 로드 실패\", {\n        description: \"통계 정보를 불러오는데 실패했습니다.\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // 파생 데이터: 게임별 빈도, 시간대별 빈도\n  const gameFreq = useMemo(() => {\n    const map = new Map<string, number>()\n    for (const e of entries) {\n      map.set(e.gameName, (map.get(e.gameName) || 0) + 1)\n    }\n    return Array.from(map.entries()).map(([name, value]) => ({ name, value }))\n  }, [entries])\n\n  const hourlyFreq = useMemo(() => {\n    const arr = Array.from({ length: 24 }, (_, h) => ({ hour: h, count: 0 }))\n    for (const e of entries) {\n      const d = new Date(e.slot)\n      const h = d.getHours()\n      arr[h].count += 1\n    }\n    return arr\n  }, [entries])\n\n  const userActivity = useMemo(() => {\n    const map = new Map<string, number>()\n    for (const e of entries) {\n      map.set(e.user, (map.get(e.user) || 0) + 1)\n    }\n    return Array.from(map.entries())\n      .map(([user, count]) => ({ user, count }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10)\n  }, [entries])\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen\">\n        <Navbar />\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"text-white\">로딩 중...</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen\">\n      <Navbar />\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-white mb-2\">서버 통계</h1>\n          <p className=\"text-white/70\">게임 플레이 패턴과 인기 시간대를 확인하세요</p>\n        </div>\n\n        {stats ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <Card className=\"glass border-white/20\">\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium text-white/80\">최다 플레이 게임</CardTitle>\n                <Trophy className=\"h-4 w-4 text-yellow-400\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-white\">{stats.topGame}</div>\n                <p className=\"text-xs text-white/60\">가장 인기 있는 게임</p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"glass border-white/20\">\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium text-white/80\">평균 플레이 시간</CardTitle>\n                <Clock className=\"h-4 w-4 text-blue-400\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-white\">\n                  {new Date(stats.avgSlot).toLocaleTimeString(\"ko-KR\", {\n                    hour: \"2-digit\",\n                    minute: \"2-digit\",\n                  })}\n                </div>\n                <p className=\"text-xs text-white/60\">평균적인 게임 시작 시간</p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"glass border-white/20\">\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium text-white/80\">피크 시간대</CardTitle>\n                <TrendingUp className=\"h-4 w-4 text-green-400\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-white\">\n                  {new Date(stats.peakSlot).toLocaleTimeString(\"ko-KR\", {\n                    hour: \"2-digit\",\n                    minute: \"2-digit\",\n                  })}\n                </div>\n                <p className=\"text-xs text-white/60\">가장 활발한 시간대</p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"glass border-white/20\">\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium text-white/80\">피크 참여자 수</CardTitle>\n                <Users className=\"h-4 w-4 text-purple-400\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-white\">{stats.peakCount}명</div>\n                <p className=\"text-xs text-white/60\">최대 동시 참여자</p>\n              </CardContent>\n            </Card>\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <div className=\"glass-card max-w-md mx-auto\">\n              <h3 className=\"text-xl font-semibold text-white mb-2\">통계 데이터 없음</h3>\n              <p className=\"text-white/70\">아직 충분한 데이터가 없습니다. 게임을 예약해보세요!</p>\n            </div>\n          </div>\n        )}\n\n        {/* 그래프 섹션 */}\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6 mt-8\">\n          {/* 게임별 분포 (파이차트) */}\n          <Card className=\"glass border-white/20\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-white text-base\">게임별 예약 분포</CardTitle>\n            </CardHeader>\n            <CardContent className=\"h-72\">\n              {gameFreq.length === 0 ? (\n                <div className=\"text-white/60\">데이터 없음</div>\n              ) : (\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <PieChart>\n                    <Pie data={gameFreq} dataKey=\"value\" nameKey=\"name\" label outerRadius={90}>\n                      {gameFreq.map((_, i) => (\n                        <Cell key={i} fill={[\"#60a5fa\", \"#34d399\", \"#a78bfa\", \"#fb923c\", \"#f472b6\", \"#22d3ee\"][i % 6]} />\n                      ))}\n                    </Pie>\n                    <Legend />\n                    <ReTooltip />\n                  </PieChart>\n                </ResponsiveContainer>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* 시간대별 예약 수 (라인차트) */}\n          <Card className=\"glass border-white/20\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-white text-base\">시간대별 예약 수</CardTitle>\n            </CardHeader>\n            <CardContent className=\"h-72\">\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <LineChart data={hourlyFreq} margin={{ left: 8, right: 16, top: 10, bottom: 10 }}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#ffffff20\" />\n                  <XAxis dataKey=\"hour\" stroke=\"#ffffff80\" tickFormatter={(h)=>String(h).padStart(2,'0')} />\n                  <YAxis stroke=\"#ffffff80\" />\n                  <ReTooltip />\n                  <Line type=\"monotone\" dataKey=\"count\" stroke=\"#60a5fa\" strokeWidth={2} dot={false} />\n                </LineChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n\n          {/* 상위 활동 유저 (막대차트) */}\n          <Card className=\"glass border-white/20 xl:col-span-2\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-white text-base\">상위 활동 유저 Top 10</CardTitle>\n            </CardHeader>\n            <CardContent className=\"h-80\">\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <BarChart data={userActivity} layout=\"vertical\" margin={{ left: 32, right: 16, top: 10, bottom: 10 }}>\n                  <CartesianGrid horizontal={false} stroke=\"#ffffff20\" />\n                  <XAxis type=\"number\" stroke=\"#ffffff80\" />\n                  <YAxis type=\"category\" dataKey=\"user\" stroke=\"#ffffff80\" width={100} />\n                  <ReTooltip />\n                  <Bar dataKey=\"count\" fill=\"#34d399\" />\n                </BarChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  )\n}\n"
                }
            }
        }
    },
    "components": {
        "__files__": {
            "auth-provider.tsx": "\"use client\"\n\nimport type React from \"react\"\n\nimport { createContext, useContext, useEffect, useState } from \"react\"\nimport { useRouter, usePathname } from \"next/navigation\"\nimport { authService } from \"@/lib/auth-service\"\nimport { requestFcmToken, onForegroundMessage } from \"@/lib/fcm\"\nimport { notificationService } from \"@/lib/notification-service\"\nimport { toast } from \"sonner\"\n\ninterface AuthContextType {\n  user: string | null\n  isLoading: boolean\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  isLoading: true,\n})\n\nexport const useAuth = () => useContext(AuthContext)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const router = useRouter()\n  const pathname = usePathname()\n\n  useEffect(() => {\n    const token = authService.getToken()\n    const currentUser = authService.getCurrentUser()\n\n    if (token && currentUser) {\n      setUser(currentUser)\n      // Attempt to register FCM token (ignore failures)\n      ;(async () => {\n        try {\n          const vapidKey = process.env.NEXT_PUBLIC_FCM_VAPID_KEY || \"BNPiSmtH-uSrFLgGI-4N75uPFIWsLVxfQgJ6kmm4ixhwc3QjdUbp_qSqHaf0xsLrG3sVNRnqbNmAoi7FAQCk6dk\"\n          if (typeof window !== \"undefined\" && 'Notification' in window) {\n            const permission = await Notification.requestPermission()\n            if (permission === 'granted') {\n              const fcmToken = await requestFcmToken(vapidKey)\n              if (fcmToken) {\n                await notificationService.registerPushToken(fcmToken, 'web')\n                authService.setFcmToken(fcmToken)\n              }\n            }\n            // Foreground push handling: show toast (page가 포커스일 때 OS 알림은 표시되지 않을 수 있음)\n            onForegroundMessage((payload) => {\n              const dataTitle = (payload?.data?.title as string) || undefined\n              const notifTitle = (payload?.notification?.title as string) || undefined\n              const title = dataTitle || notifTitle || '알림'\n              const type = payload?.data?.type as string | undefined\n              const raw = payload?.data?.payload as string | undefined\n              const bodyFromData = (payload?.data?.body as string) || ''\n              let description = bodyFromData\n              if (type === 'INVITE') {\n                try {\n                  const p = raw ? JSON.parse(raw) : undefined\n                  if (p && p.serverName && p.fromNickname) {\n                    description = `${p.fromNickname} → ${p.serverName}`\n                  }\n                } catch {}\n              } else if (type === 'GENERIC') {\n                try {\n                  const p = raw ? JSON.parse(raw) : undefined\n                  if (p && p.kind === 'friend_request' && p.fromNickname) {\n                    description = `알림 패널에서 수락/거절할 수 있어요`\n                  }\n                } catch {}\n              }\n              toast(title, { description })\n              // 포그라운드에서도 OS 알림 배너 표시\n              try {\n                if (Notification.permission === 'granted') {\n                  new Notification(title, { body: description })\n                }\n              } catch {}\n            })\n          }\n        } catch {}\n      })()\n    } else if (!pathname.startsWith(\"/auth\")) {\n      // router.push(\"/auth/login\")\n    }\n\n    setIsLoading(false)\n  }, [pathname, router])\n\n  return <AuthContext.Provider value={{ user, isLoading }}>{children}</AuthContext.Provider>\n}\n",
            "ChangeNicknameModal.tsx": "\"use client\"\n\nimport { useEffect, useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n  DialogTrigger,\n  DialogClose,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { toast } from \"sonner\";\nimport { authService } from \"@/lib/auth-service\";\nimport { Settings as SettingsIcon, Link2 } from \"lucide-react\";\n\nexport function ChangeNicknameModal() {\n  const [open, setOpen] = useState(false);\n  const [nickname, setNickname] = useState(authService.getCurrentUser() || \"\");\n  const [loading, setLoading] = useState(false);\n  const [discordLinked, setDiscordLinked] = useState<boolean | null>(null);\n\n  useEffect(() => {\n    if (!open) return;\n    (async () => {\n      try {\n        const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/users/me`, {\n          headers: { ...authService.getAuthHeaders() },\n        });\n        if (res.ok) {\n          const data = await res.json();\n          setDiscordLinked(Boolean(data.discordLinked));\n        }\n      } catch {\n        // ignore\n      }\n    })();\n  }, [open]);\n\n  const save = async () => {\n    setLoading(true);\n    try {\n      // API 호출\n      const res = await fetch(\n        `${process.env.NEXT_PUBLIC_API_URL}/users/me/nickname`,\n        {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            ...authService.getAuthHeaders(),\n          },\n          body: JSON.stringify({ nickname }),\n        }\n      );\n      if (!res.ok) {\n        // 에러 메시지 추출: 본문은 한 번만 읽고(JSON 파싱 시도 → 실패 시 원문 사용)\n        const bodyText = await res.text();\n        let msg = '닉네임 변경에 실패했습니다';\n        try {\n          const err = JSON.parse(bodyText);\n          msg = err?.message || err?.error || msg;\n        } catch {\n          if (bodyText) msg = bodyText;\n        }\n        throw new Error(msg);\n      }\n      const data = await res.json();\n      // 백엔드가 Profile 객체를 그대로 반환하므로 바로 사용\n      authService.setCurrentUser({ id: authService.getCurrentUserId()!, nickname: data.nickname });\n      toast.success('닉네임이 변경되었습니다');\n      setOpen(false);\n    } catch (e: any) {\n      const msg = typeof e?.message === 'string' ? e.message : '닉네임 변경에 실패했습니다';\n      // 서버에서 남은 시간 안내 메시지를 내려주면 그대로 출력\n      toast.error(msg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"text-white hover:bg-white/20\"\n        >\n          <SettingsIcon className=\"h-5 w-5 text-white\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"glass border-white/20 max-w-sm\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white\">닉네임 변경</DialogTitle>\n        </DialogHeader>\n        <div className=\"p-4 space-y-3\">\n          <Input\n            value={nickname}\n            onChange={e => setNickname(e.target.value)}\n            className=\"glass border-white/30 text-white\"\n          />\n          <div className=\"text-xs text-white/60\">닉네임은 24시간에 한 번만 변경할 수 있습니다.</div>\n          <div className=\"pt-2 border-t border-white/10\">\n            {discordLinked ? (\n              <div className=\"w-full text-center text-xs text-emerald-300/90 py-2\">디스코드에 연동되었습니다</div>\n            ) : (\n              <>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"w-full glass border-white/30 text-white flex items-center justify-center gap-2\"\n                  onClick={() => {\n                    window.location.href = `${process.env.NEXT_PUBLIC_API_URL!.replace(/\\/api$/, \"\")}/oauth2/authorization/discord`;\n                  }}\n                >\n                  <Link2 className=\"w-4 h-4\" /> 디스코드로 연동하기\n                </Button>\n                <div className=\"text-[11px] text-white/50 mt-1\">이미 다른 계정에 연동되어 있다면, 연동된 계정이라는 안내가 표시됩니다.</div>\n              </>\n            )}\n          </div>\n        </div>\n        <DialogFooter>\n          <DialogClose asChild>\n            <Button variant=\"outline\">취소</Button>\n          </DialogClose>\n          <Button onClick={save} disabled={loading}>\n            {loading ? '저장 중...' : '저장'}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
            "create-server-modal.tsx": "\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { toast } from \"sonner\"\nimport { serverService } from \"@/lib/server-service\"\nimport { Loader2 } from \"lucide-react\"\n\ninterface CreateServerModalProps {\n  open: boolean\n  onClose: () => void\n  onServerCreated: (server: any) => void\n}\n\nexport function CreateServerModal({ open, onClose, onServerCreated }: CreateServerModalProps) {\n  const [name, setName] = useState(\"\")\n  const [resetTime, setResetTime] = useState(\"06:00\")\n  const [isLoading, setIsLoading] = useState(false)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n\n    try {\n      const server = await serverService.createServer({\n        name,\n        resetTime,\n      })\n      onServerCreated(server)\n      setName(\"\")\n      setResetTime(\"06:00\")\n    } catch (error) {\n      toast.error(\"서버 생성 실패\", {\n        description: \"서버 생성 중 오류가 발생했습니다.\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"glass border-white/20\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white\">새 서버 생성</DialogTitle>\n          <DialogDescription className=\"text-white/70\">새로운 게임 서버를 생성합니다.</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\" className=\"text-white\">\n              서버 이름\n            </Label>\n            <Input\n              id=\"name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              className=\"glass border-white/30 text-white placeholder:text-white/50\"\n              placeholder=\"서버 이름을 입력하세요\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"resetTime\" className=\"text-white\">\n              초기화 시간\n            </Label>\n            <Input\n              id=\"resetTime\"\n              type=\"time\"\n              value={resetTime}\n              onChange={(e) => setResetTime(e.target.value)}\n              className=\"glass border-white/30 text-white\"\n              required\n            />\n          </div>\n          <div className=\"flex justify-end space-x-2 pt-4\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={onClose}\n              className=\"glass-button\"\n            >\n              취소\n            </Button>\n            <Button type=\"submit\" className=\"glass-button\" disabled={isLoading}>\n              {isLoading ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  생성 중...\n                </>\n              ) : (\n                \"생성\"\n              )}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n",
            "Footer.tsx": "// components/Footer.tsx\n\"use client\"\n\nimport React from \"react\"\n\nexport function Footer() {\n  return (\n    <footer className=\"w-full py-4 text-center text-gray-400 text-sm bg-gradient-to-t from-black/30 to-transparent mt-auto\">\n      <div>© {new Date().getFullYear()} GameSync. All rights reserved.</div>\n      <div>\n        오류 문의:{\" \"}\n        <a\n          href=\"mailto:bugs@gamesync.example.com\"\n          className=\"hover:text-blue-300\"\n        >\n          gy255318@gmail.com\n        </a>\n      </div>\n      <div>Thanks to. SS, YC</div>\n    </footer>\n  )\n}\n",
            "friend-drawer.tsx": "\"use client\"\n\nimport { useEffect, useMemo, useRef, useState } from \"react\"\nimport { createPortal } from \"react-dom\"\nimport { X, UserPlus, Check, XCircle, Users } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { toast } from \"sonner\"\nimport { Input } from \"@/components/ui/input\"\nimport { friendService, FriendListResponse, PendingListResponse, FriendCodeResponse } from \"@/lib/friend-service\"\n\ninterface FriendDrawerProps {\n  open: boolean\n  onClose: () => void\n}\n\nexport function FriendDrawer({ open, onClose }: FriendDrawerProps) {\n  const panelRef = useRef<HTMLDivElement>(null)\n  const overlayRef = useRef<HTMLDivElement>(null)\n  const [friends, setFriends] = useState<FriendListResponse>({ friends: [] })\n  const [received, setReceived] = useState<PendingListResponse>({ requests: [] })\n  const [sent, setSent] = useState<PendingListResponse>({ requests: [] })\n  const [friendCode, setFriendCode] = useState(\"\")\n  const [isLoading, setIsLoading] = useState(false)\n  const [myCode, setMyCode] = useState<FriendCodeResponse | null>(null)\n  const uniqueFriends = useMemo(() => {\n    const seen = new Set<number>()\n    return friends.friends.filter((u) => {\n      if (seen.has(u.id)) return false\n      seen.add(u.id)\n      return true\n    })\n  }, [friends])\n\n  useEffect(() => {\n    if (!open) return\n    let isActive = true\n    ;(async () => {\n      setIsLoading(true)\n      try {\n        const [f, r, s, c] = await Promise.all([\n          friendService.getFriends(),\n          friendService.getPendingReceived(),\n          friendService.getPendingSent(),\n          friendService.getMyFriendCode(),\n        ])\n        if (!isActive) return\n        setFriends(f)\n        setReceived(r)\n        setSent(s)\n        setMyCode(c)\n      } finally {\n        if (isActive) setIsLoading(false)\n      }\n    })()\n    return () => {\n      isActive = false\n    }\n  }, [open])\n\n  useEffect(() => {\n    function handleOutside(e: MouseEvent) {\n      if (!open) return\n      const target = e.target as Node\n      if (panelRef.current && !panelRef.current.contains(target)) {\n        onClose()\n      }\n    }\n    document.addEventListener(\"mousedown\", handleOutside)\n    return () => document.removeEventListener(\"mousedown\", handleOutside)\n  }, [open, onClose])\n\n  const handleSendByCode = async () => {\n    if (!friendCode.trim()) return\n    setIsLoading(true)\n    try {\n      await friendService.sendRequestByCode(friendCode.trim())\n      const r = await friendService.getPendingSent()\n      setSent(r)\n      setFriendCode(\"\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleRespond = async (requestId: number, accept: boolean) => {\n    setIsLoading(true)\n    try {\n      await friendService.respond(requestId, accept)\n      const [f, r] = await Promise.all([\n        friendService.getFriends(),\n        friendService.getPendingReceived(),\n      ])\n      setFriends(f)\n      setReceived(r)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // 클라이언트 마운트 이후에만 포털 렌더링하여 SSR/CSR 불일치 방지\n  const [mounted, setMounted] = useState(false)\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  const drawerUi = (\n    <>\n      {/* Overlay */}\n      <div\n        ref={overlayRef}\n        className={`fixed inset-0 transition-opacity duration-300 ${\n          open ? \"bg-black/60 pointer-events-auto\" : \"bg-black/0 pointer-events-none\"\n        } z-[10000]`}\n        aria-hidden=\"true\"\n      />\n\n      {/* Drawer Panel */}\n      <div\n        ref={panelRef}\n        className={`fixed top-0 right-0 h-screen w-full sm:w-[420px] max-w-[100vw] bg-background border-l border-white/10 text-foreground z-[10001] transform transition-transform duration-300 ${\n          open ? \"translate-x-0\" : \"translate-x-full\"\n        }`}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b border-white/10\">\n          <div className=\"flex items-center gap-2\">\n            <Users className=\"w-5 h-5\" />\n            <h2 className=\"text-lg font-semibold\">친구</h2>\n          </div>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose} className=\"text-muted-foreground hover:bg-white/10\">\n            <X className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        <div className=\"p-4 space-y-6 overflow-y-auto h-[calc(100vh-64px)]\">\n          {/* My Friend Code */}\n          <div>\n            <h3 className=\"text-sm font-semibold mb-2\">내 친구코드</h3>\n            <div className=\"flex items-center justify-between bg-white/5 border border-white/10 rounded-md p-2\">\n              <div className=\"text-base font-mono tracking-widest\">{myCode?.code ?? \"-\"}</div>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"text-muted-foreground hover:bg-white/10\"\n                onClick={async () => {\n                  try {\n                    if (myCode?.code) {\n                      await navigator.clipboard.writeText(myCode.code)\n                      toast.success(\"친구코드가 복사되었습니다\")\n                    }\n                  } catch {\n                    toast.error(\"친구코드 복사 실패\")\n                  }\n                }}\n              >\n                복사\n              </Button>\n            </div>\n          </div>\n          {/* Add Friend by Code */}\n          <div>\n            <h3 className=\"text-sm font-semibold mb-2\">친구 추가</h3>\n            <div className=\"flex gap-2\">\n              <Input\n                value={friendCode}\n                onChange={(e) => setFriendCode(e.target.value)}\n                placeholder=\"친구 코드 입력 (예: 123456)\"\n                className=\"bg-white/5 border-white/10 text-foreground placeholder:text-muted-foreground\"\n              />\n              <Button onClick={handleSendByCode} disabled={isLoading} className=\"whitespace-nowrap\">\n                <UserPlus className=\"w-4 h-4 mr-1\" />추가\n              </Button>\n            </div>\n          </div>\n\n          {/* Pending Received */}\n          <div>\n            <h3 className=\"text-sm font-semibold mb-2\">받은 요청</h3>\n            <div className=\"space-y-2\">\n              {received.requests.length === 0 && (\n                <div className=\"text-muted-foreground text-sm\">받은 요청이 없습니다.</div>\n              )}\n              {received.requests.map((r) => (\n                <div key={r.requestId} className=\"flex items-center justify-between bg-white/5 border border-white/10 rounded-md p-2\">\n                  <div>\n                    <div className=\"text-sm font-medium\">{r.user.nickname}</div>\n                    <div className=\"text-xs text-muted-foreground\">@{r.user.username}</div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button size=\"icon\" variant=\"ghost\" className=\"hover:bg-white/10\" onClick={() => handleRespond(r.requestId, true)} disabled={isLoading}>\n                      <Check className=\"w-4 h-4\" />\n                    </Button>\n                    <Button size=\"icon\" variant=\"ghost\" className=\"hover:bg-white/10\" onClick={() => handleRespond(r.requestId, false)} disabled={isLoading}>\n                      <XCircle className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Pending Sent */}\n          <div>\n            <h3 className=\"text-sm font-semibold mb-2\">보낸 요청</h3>\n            <div className=\"space-y-2\">\n              {sent.requests.length === 0 && (\n                <div className=\"text-muted-foreground text-sm\">보낸 요청이 없습니다.</div>\n              )}\n              {sent.requests.map((r) => (\n                <div key={r.requestId} className=\"flex items-center justify-between bg-white/5 border border-white/10 rounded-md p-2\">\n                  <div>\n                    <div className=\"text-sm font-medium\">{r.user.nickname}</div>\n                    <div className=\"text-xs text-muted-foreground\">@{r.user.username}</div>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">대기중</div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Friends list */}\n          <div>\n            <h3 className=\"text-sm font-semibold mb-2\">친구 목록</h3>\n            <div className=\"space-y-2\">\n              {friends.friends.length === 0 && (\n                <div className=\"text-muted-foreground text-sm\">친구가 없습니다.</div>\n              )}\n              {uniqueFriends.map((u) => (\n                <div key={`friend-${u.id}`} className=\"flex items-center justify-between bg-white/5 border border-white/10 rounded-md p-2\">\n                  <div>\n                    <div className=\"text-sm font-medium\">{u.nickname}</div>\n                    <div className=\"text-xs text-muted-foreground\">@{u.username}</div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n\n  if (!mounted) return null\n  return createPortal(drawerUi, document.body)\n}\n\n\n",
            "game-management.tsx": "\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { toast } from \"sonner\"\nimport { gameService } from \"@/lib/game-service\"\nimport { Plus, Trash2, Gamepad2 } from \"lucide-react\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n  DialogClose,\n} from \"@/components/ui/dialog\"\n\ninterface Game {\n  id: number\n  name: string\n}\n\ninterface GameManagementProps {\n  serverId: number\n}\n\nexport function GameManagement({ serverId }: GameManagementProps) {\n  const [defaultGames, setDefaultGames] = useState<Game[]>([])\n  const [customGames, setCustomGames] = useState<Game[]>([])\n  const [newGameName, setNewGameName] = useState(\"\")\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Deletion modal state\n  const [showDeleteModal, setShowDeleteModal] = useState(false)\n  const [deletingGameId, setDeletingGameId] = useState<number | null>(null)\n  const [deletingGameName, setDeletingGameName] = useState<string>(\"\")\n  const [scheduledUsers, setScheduledUsers] = useState<string[]>([])\n\n  useEffect(() => {\n    loadGames()\n  }, [serverId])\n\n  const loadGames = async () => {\n    setIsLoading(true)\n    try {\n      const [defaultData, customData] = await Promise.all([\n        gameService.getDefaultGames(),\n        gameService.getCustomGames(serverId),\n      ])\n      setDefaultGames(defaultData.defaultGames)\n      setCustomGames(customData.customGames)\n    } catch {\n      toast.error(\"게임 목록 로드 실패\", {\n        description: \"게임 목록을 불러오는데 실패했습니다.\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleAddCustomGame = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!newGameName.trim()) return\n    try {\n      const newGame = await gameService.addCustomGame(serverId, {\n        name: newGameName,\n      })\n      setCustomGames((prev) => [...prev, newGame])\n      setNewGameName(\"\")\n      toast.success(\"게임 추가 완료\", {\n        description: `${newGame.name}이 추가되었습니다.`,\n      })\n    } catch {\n      toast.error(\"게임 추가 실패\", {\n        description: \"게임 추가 중 오류가 발생했습니다.\",\n      })\n    }\n  }\n\n  const requestDeleteCustomGame = async (gameId: number, gameName: string) => {\n    try {\n      const data = await gameService.getScheduledUsers(serverId, gameId)\n      const users = data.users.map((u) => u.username)\n\n      if (users.length > 0) {\n        // 예약된 사용자가 있을 때만 모달 표시\n        setScheduledUsers(users)\n        setDeletingGameId(gameId)\n        setDeletingGameName(gameName)\n        setShowDeleteModal(true)\n      } else {\n        // 예약된 사용자가 없으면 바로 삭제\n        await gameService.deleteCustomGame(serverId, gameId)\n        setCustomGames((prev) => prev.filter((g) => g.id !== gameId))\n        toast.success(\"게임 삭제 완료\", {\n          description: `${gameName}이 삭제되었습니다.`,\n        })\n      }\n    } catch {\n      toast.error(\"예약자 조회 실패\", {\n        description: \"예약된 사용자를 불러오는데 실패했습니다.\",\n      })\n    }\n  }\n\n  const confirmDelete = async () => {\n    if (deletingGameId == null) return\n    try {\n      await gameService.deleteCustomGame(serverId, deletingGameId)\n      setCustomGames((prev) =>\n        prev.filter((g) => g.id !== deletingGameId)\n      )\n      toast.success(\"게임 삭제 완료\", {\n        description: `${deletingGameName}과 예약 기록이 삭제되었습니다.`,\n      })\n    } catch {\n      toast.error(\"게임 삭제 실패\", {\n        description: \"게임 삭제 중 오류가 발생했습니다.\",\n      })\n    } finally {\n      setShowDeleteModal(false)\n      setDeletingGameId(null)\n      setDeletingGameName(\"\")\n      setScheduledUsers([])\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <Card className=\"glass border-white/20 h-full\">\n        <CardHeader>\n          <CardTitle className=\"text-black flex items-center\">\n            <Gamepad2 className=\"mr-2 h-5 w-5\" /> 게임 관리\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div>로딩 중...</div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <>\n      <Card className=\"glass border-white/20 h-full flex flex-col\">\n        <CardHeader>\n          <CardTitle className=\"text-white flex items-center\">\n            <Gamepad2 className=\"mr-2 h-5 w-5\" /> 게임 관리\n          </CardTitle>\n          <CardDescription className=\"text-white/70\">\n            기본 게임과 커스텀 게임을 관리하세요\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6 flex-grow\">\n          <h3 className=\"text-white font-medium mb-3\">커스텀 게임</h3>\n          <form\n            onSubmit={handleAddCustomGame}\n            className=\"flex gap-2 mb-3\"\n          >\n            <Input\n              value={newGameName}\n              onChange={(e) => setNewGameName(e.target.value)}\n              placeholder=\"게임 이름\"\n              className=\"glass border-white/30 text-white placeholder:text-white/50 text-sm\"\n            />\n            <Button\n              type=\"submit\"\n              size=\"sm\"\n              className=\"glass-button hover:bg-black/10\"\n            >\n              <Plus className=\"h-4 w-4\" />\n            </Button>\n          </form>\n          <div className=\"space-y-2 max-h-48 overflow-y-auto overflow-x-hidden\">\n            {customGames.map((game) => (\n              <div\n                key={game.id}\n                className=\"flex items-center justify-between p-2 glass rounded-lg hover:bg-black/10\"\n              >\n                <span className=\"text-white text-sm truncate w-40\">\n                  {game.name}\n                </span>\n                <Button\n                  onClick={() =>\n                    requestDeleteCustomGame(game.id, game.name)\n                  }\n                  size=\"sm\"\n                  variant=\"ghost\"\n                  className=\"text-red-400 truncate hover:text-red-300 hover:bg-red-500/20\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* 삭제 확인 모달 */}\n      <Dialog\n        open={showDeleteModal}\n        onOpenChange={setShowDeleteModal}\n      >\n        <DialogContent className=\"glass border-white/20 max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"text-white\">\n              {deletingGameName} 삭제 확인\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"p-4 text-white\">\n            <p>다음 사용자가 예약한 기록이 있습니다:</p>\n            <ul className=\"list-disc list-inside mt-2 space-y-1\">\n              {scheduledUsers.map((user) => (\n                <li key={user}>{user}</li>\n              ))}\n            </ul>\n            <p className=\"mt-4\">정말로 삭제하시겠습니까?</p>\n          </div>\n          <DialogFooter>\n            <DialogClose asChild>\n              <Button\n                variant=\"outline\"\n                className=\"glass border-white/30 text-white\"\n              >\n                취소\n              </Button>\n            </DialogClose>\n            <Button\n              onClick={confirmDelete}\n              className=\"glass-button text-white\"\n            >\n              예, 삭제합니다\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n",
            "GameSyncLanding.tsx": "'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\n// Demo image section removed; no Image import needed\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Gamepad2,\n  Calendar,\n  RefreshCw,\n  Users,\n  BarChart3,\n  ArrowRight,\n  Zap,\n} from 'lucide-react'\n\nexport default function GameSyncLanding() {\n  const [isVisible, setIsVisible] = useState(false)\n\n  useEffect(() => {\n    setIsVisible(true)\n  }, [])\n\n  return (\n    <div className=\"min-h-screen text-foreground font-['Inter'] overflow-x-hidden\">\n      {/* Header */}\n      <header className=\"relative z-50 px-4 py-6\">\n        <div className=\"max-w-7xl mx-auto flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10\">\n              <Gamepad2 className=\"w-6 h-6 text-muted-foreground\" />\n            </div>\n            <span className=\"text-2xl font-bold\">GameSync</span>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <Link href=\"/auth/login\" passHref>\n              <Button variant=\"ghost\" className=\"text-muted-foreground hover:bg-white/10 backdrop-blur-sm border border-white/10\">\n                로그인\n              </Button>\n            </Link>\n            <Link href=\"/auth/signup\" passHref>\n              <Button>\n                회원가입\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </header>\n\n      {/* Hero Section */}\n      <section className=\"relative px-4 py-20\">\n        <div className=\"max-w-4xl mx-auto text-center\">\n          <div className={`transition-all duration-1000 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'}`}>\n            <Badge className=\"mb-6 bg-white/5 backdrop-blur-sm border border-white/10 text-foreground hover:bg-white/10\">\n              <Zap className=\"w-4 h-4 mr-2\" />\n              게임 약속, 쉽게 모아요\n            </Badge>\n            <h1 className=\"text-5xl md:text-7xl font-bold mb-6 leading-tight\">\n              함께 할 시간,\n              <br />\n              <span className=\"bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent\">\n                GameSync와 함께\n              </span>\n            </h1>\n            <p className=\"text-xl md:text-2xl text-white/80 mb-8 max-w-2xl mx-auto leading-relaxed\">\n              GameSync는 약속 공유, 초대 코드, 자동 초기화를 지원해요.  번거로운 조율 없이 바로 모일 수 있어요.\n            </p>\n            <Link href=\"/auth/signup\" passHref>\n              <Button\n                size=\"lg\"\n                className=\"px-8 py-4 text-lg font-semibold rounded-xl\"\n              >\n                무료로 시작하기\n                <ArrowRight className=\"w-5 h-5 ml-2\" />\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      {/* Features Section */}\n      <section className=\"relative px-4 py-20\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className={`text-center mb-16 transition-all duration-1000 delay-300 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'}`}>\n            <h2 className=\"text-4xl md:text-5xl font-bold mb-4\">GameSync로 할 수 있는 것들</h2>\n            <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n              필요한 기능만 담았어요. 가볍게 시작해보세요.\n            </p>\n          </div>\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {[\n              {\n                icon: Calendar,\n                title: '약속 관리',\n                description: '원하는 시간에 약속을 만들고 참여를 받으세요.',\n                delay: 'delay-500',\n              },\n              {\n                icon: RefreshCw,\n                title: '자동 초기화',\n                description: '매일 정해둔 시각에 자동으로 초기화돼요.',\n                delay: 'delay-700',\n              },\n              {\n                icon: Users,\n                title: '초대 코드',\n                description: '코드 한 번으로 친구들을 초대하세요.',\n                delay: 'delay-900',\n              },\n              {\n                icon: BarChart3,\n                title: '활동 통계',\n                description: '언제 가장 많이 모이는지 한눈에 확인하세요.',\n                delay: 'delay-1100',\n              },\n            ].map((feature, idx) => (\n              <Card\n                key={idx}\n                className={`bg-white/5 backdrop-blur-sm border border-white/10 hover:bg-white/10 transition-all duration-500 ${feature.delay} ${\n                  isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'\n                }`}\n              >\n                <CardContent className=\"p-6 text-center\">\n                  <div className=\"mb-4 p-3 rounded-xl bg-primary/10 w-fit mx-auto\">\n                    <feature.icon className=\"w-8 h-8 text-primary\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold mb-3 text-foreground\">{feature.title}</h3>\n                  <p className=\"text-muted-foreground leading-relaxed\">{feature.description}</p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      \n\n      {/* CTA Section */}\n      <section className=\"relative px-4 py-20\">\n        <div className=\"max-w-4xl mx-auto text-center\">\n          <Card\n            className={`bg-white/5 backdrop-blur-sm border border-white/10 overflow-hidden transition-all duration-1000 delay-1500 ${\n              isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'\n            }`}\n          >\n            <CardContent className=\"p-12\">\n              <h2 className=\"text-4xl md:text-5xl font-bold mb-6 text-foreground\">지금 시작하세요</h2>\n              <p className=\"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto\">\n                GameSync로 팀의 게임 일정을 체계적으로 운영하세요. 지금 바로 무료로 시작할 수 있습니다.\n              </p>\n              <Link href=\"/auth/signup\" passHref>\n                <Button\n                  size=\"lg\"\n                  className=\"px-12 py-4 text-xl font-semibold rounded-xl\"\n                >\n                  무료로 시작하기\n                  <ArrowRight className=\"w-6 h-6 ml-2\" />\n                </Button>\n              </Link>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n    </div>\n  )\n}\n",
            "join-by-code-modal.tsx": "// components/join-by-code-modal.tsx\n\"use client\"\n\nimport React, { useState } from \"react\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n  DialogClose,\n} from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { toast } from \"sonner\"\nimport { serverService } from \"@/lib/server-service\"\n\ninterface JoinByCodeModalProps {\n  open: boolean\n  onClose: () => void\n  onJoinSuccess: () => void\n}\n\nexport function JoinByCodeModal({ open, onClose, onJoinSuccess }: JoinByCodeModalProps) {\n  const [code, setCode] = useState<string>(\"\")\n\n  const handleJoin = async () => {\n    try {\n      await serverService.joinByCode(code)\n      toast.success(\"서버 참가 완료\")\n      onJoinSuccess()\n      onClose()\n    } catch {\n      toast.error(\"초대 코드가 올바르지 않습니다\")\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"glass border-white/20 max-w-sm\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white\">초대 코드로 가입</DialogTitle>\n        </DialogHeader>\n        <div className=\"p-4\">\n          <Input\n            placeholder=\"초대 코드 (6자리)\"\n            value={code}\n            onChange={(e) => setCode(e.target.value.toUpperCase())}\n            maxLength={6}\n            className=\"glass border-white/30 text-white\"\n          />\n        </div>\n        <DialogFooter>\n          <DialogClose asChild>\n            <Button variant=\"outline\" className=\"glass border-white/30 text-white\">취소</Button>\n          </DialogClose>\n          <Button onClick={handleJoin} className=\"glass-button text-white\">참가</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n",
            "navbar.tsx": "\"use client\"\n\nimport Link from \"next/link\"\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { authService } from \"@/lib/auth-service\"\nimport { GamepadIcon, LogOut, Bell, Users } from \"lucide-react\"\nimport { ChangeNicknameModal } from \"@/components/ChangeNicknameModal\"\nimport { FriendDrawer } from \"@/components/friend-drawer\"\nimport { NotificationPanel } from \"@/components/notification-panel\"\nimport { serverService } from \"@/lib/server-service\"\nimport { notificationService } from \"@/lib/notification-service\"\n\nexport function Navbar() {\n  const [user, setUser] = useState<string | null>(null)\n  const [friendOpen, setFriendOpen] = useState(false)\n  const [notifOpen, setNotifOpen] = useState(false)\n  const [unread, setUnread] = useState(0)\n\n  useEffect(() => {\n    // 클라이언트에서만 실행\n    const nickname = authService.getCurrentUser()\n    setUser(nickname)\n    ;(async () => {\n      try {\n        const data = await notificationService.getNotifications()\n        setUnread(data.unreadCount)\n      } catch {}\n    })()\n  }, [])\n\n  const handleLogout = async () => {\n    try {\n      await authService.logout()\n      window.location.href = \"/auth/login\"\n    } catch {\n      console.error(\"Logout failed\")\n    }\n  }\n\n  return (\n    <nav className=\"glass border-b border-white/10/60\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16 space-x-4\">\n          {/* 로고 및 타이틀 */}\n          <Link href=\"/dashboard\" className=\"flex items-center space-x-2\">\n            <GamepadIcon className=\"h-6 w-6 text-muted-foreground\" />\n            <span className=\"text-xs sm:text-sm md:text-base lg:text-lg font-bold text-foreground whitespace-nowrap\">\n              GameSync\n            </span>\n          </Link>\n\n          {/* 사용자 정보 및 액션 */}\n          <div className=\"flex items-center space-x-3\">\n            {user && (\n              <span className=\"text-xs sm:text-sm md:text-base text-foreground font-medium whitespace-nowrap\">\n                {user}\n              </span>\n            )}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"relative text-muted-foreground hover:bg-white/10 hover:text-foreground\"\n              onClick={() => setFriendOpen(true)}\n              aria-label=\"친구 열기\"\n            >\n              <Users className=\"h-5 w-5\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"relative text-muted-foreground hover:bg-white/10 hover:text-foreground\"\n              onClick={() => setNotifOpen(v => !v)}\n            >\n              <Bell className=\"h-5 w-5\" />\n              {unread > 0 && (\n                <span className=\"absolute top-1 right-1 h-2 w-2 rounded-full bg-destructive\" />\n              )}\n            </Button>\n            <ChangeNicknameModal />\n            <Button\n              onClick={handleLogout}\n              variant=\"ghost\"\n              className=\"flex items-center text-xs sm:text-sm md:text-base text-muted-foreground hover:bg-white/10 hover:text-foreground whitespace-nowrap\"\n            >\n              <LogOut className=\"mr-1 h-4 w-4\" />\n              로그아웃\n            </Button>\n          </div>\n        </div>\n      </div>\n      {/* 친구/알림 패널이 항상 최상단에 오도록 nav 내부의 맨 마지막에 두고, 고정 z-index 사용 */}\n      <FriendDrawer open={friendOpen} onClose={() => setFriendOpen(false)} />\n      <NotificationPanel\n        open={notifOpen}\n        onClose={() => setNotifOpen(false)}\n        onUnreadChange={setUnread}\n        onInviteAction={async (inviteId, accept) => {\n          try {\n            // 초대 응답 API\n            const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8080/api\"\n            await fetch(`${API_BASE}/servers/invites/${inviteId}/respond`, {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json', ...authService.getAuthHeaders() },\n              body: JSON.stringify({ accept })\n            })\n            // 수락이면 대시보드/서버 목록 새로고침은 사용자가 수동으로 함. 여기선 토스트만 처리\n          } catch {\n            console.error('초대 응답 실패')\n          }\n        }}\n      />\n    </nav>\n  )\n}\n",
            "notification-panel.tsx": "\"use client\"\n\nimport { useEffect, useMemo, useRef, useState } from \"react\"\nimport { createPortal } from \"react-dom\"\nimport { notificationService, type NotificationItem } from \"@/lib/notification-service\"\nimport { friendService } from \"@/lib/friend-service\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { toast } from \"sonner\"\n\ninterface Props {\n  open: boolean\n  onClose: () => void\n  onInviteAction?: (inviteId: number, accept: boolean) => Promise<void>\n  onUnreadChange?: (unread: number) => void\n}\n\nexport function NotificationPanel({ open, onClose, onInviteAction, onUnreadChange }: Props) {\n  const panelRef = useRef<HTMLDivElement>(null)\n  const [items, setItems] = useState<NotificationItem[]>([])\n  const [unread, setUnread] = useState(0)\n  const [loading, setLoading] = useState(false)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => { setMounted(true) }, [])\n\n  useEffect(() => {\n    if (!open) return\n    let active = true\n    ;(async () => {\n      setLoading(true)\n      try {\n        const data = await notificationService.getNotifications()\n        if (!active) return\n        setItems(data.notifications)\n        setUnread(data.unreadCount)\n        onUnreadChange?.(data.unreadCount)\n\n        // 패널을 연 시점에 모두 읽음 처리\n        const unreadIds = data.notifications.filter(n => !n.read).map(n => n.id)\n        if (unreadIds.length > 0) {\n          await Promise.allSettled(unreadIds.map(id => notificationService.markAsRead(id)))\n          if (!active) return\n          // 로컬 상태 업데이트 및 배지 제거\n          setItems(prev => prev.map(i => ({ ...i, read: true })))\n          setUnread(0)\n          onUnreadChange?.(0)\n        }\n      } catch {\n        toast.error(\"알림 로드 실패\")\n      } finally {\n        if (active) setLoading(false)\n      }\n    })()\n    return () => {\n      active = false\n    }\n  }, [open])\n\n  useEffect(() => {\n    function onOutside(e: MouseEvent) {\n      if (!open) return\n      const t = e.target as Node\n      if (panelRef.current && !panelRef.current.contains(t)) onClose()\n    }\n    document.addEventListener(\"mousedown\", onOutside)\n    return () => document.removeEventListener(\"mousedown\", onOutside)\n  }, [open, onClose])\n\n  const heightClass = useMemo(() => {\n    // 아이템 수에 따라 높이 동적 조절: 최대 420px, 최소 160px\n    const base = Math.min(Math.max(items.length * 80 + 80, 160), 420)\n    return `max-h-[${base}px]`\n  }, [items.length])\n\n  // 개별 읽음 버튼은 제거. 수동 호출이 필요한 내부 시나리오만 유지할 경우 아래 유틸 사용\n  const markRead = async (id: number) => {\n    try {\n      await notificationService.markAsRead(id)\n      setItems(prev => prev.map(i => (i.id === id ? { ...i, read: true } : i)))\n    } catch {}\n  }\n\n  // 메시지가 JSON이면 파싱, 아니면 null\n  function parseMessage<T = any>(msg: string | null): T | null {\n    if (!msg) return null\n    try { return JSON.parse(msg) as T } catch { return null }\n  }\n\n  async function handleInviteDecision(n: NotificationItem, accept: boolean, inviteId: number) {\n    if (!onInviteAction) return\n    try {\n      await onInviteAction(inviteId, accept)\n      await markRead(n.id)\n      setItems(prev => prev.filter(i => i.id !== n.id))\n      toast.success(accept ? \"초대를 수락했습니다\" : \"초대를 거절했습니다\")\n    } catch {\n      toast.error(\"초대 응답 실패\")\n    }\n  }\n\n  async function handleFriendRequestDecision(n: NotificationItem, requestId: number, accept: boolean) {\n    try {\n      await friendService.respond(requestId, accept)\n      await markRead(n.id)\n      setItems(prev => prev.filter(i => i.id !== n.id))\n      toast.success(accept ? \"친구 요청을 수락했습니다\" : \"친구 요청을 거절했습니다\")\n    } catch {\n      toast.error(\"친구 요청 처리 실패\")\n    }\n  }\n\n  const panel = (\n    <div className={`fixed top-16 right-4 z-[11000] transition ${open ? \"opacity-100\" : \"opacity-0 pointer-events-none\"}`}>\n      <div ref={panelRef} className={`w-[360px] glass border border-white/10 rounded-xl overflow-hidden`}>\n        <div className=\"px-4 py-3 border-b border-white/10 flex items-center justify-between\">\n          <div className=\"text-sm text-white/80\">알림 {unread > 0 ? `(미읽음 ${unread})` : \"\"}</div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"text-white/70\"\n              onClick={async () => {\n                try {\n                  await notificationService.clearAll()\n                  setItems([])\n                  setUnread(0)\n                  onUnreadChange?.(0)\n                } catch {\n                  toast.error(\"알림 삭제 실패\")\n                }\n              }}\n            >\n              알림 지우기\n            </Button>\n            <Button variant=\"ghost\" size=\"sm\" className=\"text-white/70\" onClick={onClose}>\n              닫기\n            </Button>\n          </div>\n        </div>\n        <div className={`p-2 overflow-y-auto ${heightClass}`}>\n          {loading && <div className=\"text-white/70 p-4\">불러오는 중...</div>}\n          {!loading && items.length === 0 && <div className=\"text-white/60 p-4 text-sm\">알림이 없습니다.</div>}\n          {!loading && items\n            .slice()\n            .sort((a,b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\n            .map((n) => {\n            const isInvite = n.type === \"INVITE\"\n            const payload = parseMessage<{ kind?: string, inviteId?: number, requestId?: number, serverName?: string, fromNickname?: string }>(n.message)\n            const isFriendRequest = payload?.kind === 'friend_request' && typeof payload.requestId === 'number'\n            const inviteId = payload?.kind === 'server_invite' && typeof payload.inviteId === 'number' ? payload.inviteId : undefined\n            return (\n              <Card key={n.id} className=\"glass border-white/10 p-3 mb-2\">\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div>\n                    <div className=\"text-sm text-white font-medium\">{n.title}</div>\n                    {/* JSON payload가 아니면 원문 출력 */}\n                    {!payload && n.message && (\n                      <div className=\"text-xs text-white/70 mt-1 whitespace-pre-line\">{n.message}</div>\n                    )}\n                    {isFriendRequest && (\n                      <div className=\"text-xs text-white/70 mt-1\">{payload?.fromNickname ?? '상대방'} 님이 친구 요청을 보냈습니다.</div>\n                    )}\n                    {isInvite && payload?.kind === 'server_invite' && (\n                      <div className=\"text-xs text-white/70 mt-1\">{payload?.fromNickname ?? '상대방'} → {payload?.serverName ?? ''}</div>\n                    )}\n                  </div>\n                  <div className=\"flex items-center gap-1\" />\n                </div>\n                {/* 서버 초대 알림이면 수락/거절 버튼 */}\n                {onInviteAction && inviteId && (\n                  <div className=\"mt-2 flex gap-2\">\n                    <Button size=\"sm\" className=\"glass-button\" onClick={() => handleInviteDecision(n, true, inviteId)}>\n                      수락\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" className=\"glass border-white/30 text-white\" onClick={() => handleInviteDecision(n, false, inviteId)}>\n                      거절\n                    </Button>\n                  </div>\n                )}\n                {/* 친구 요청 알림이면 수락/거절 버튼 */}\n                {isFriendRequest && (\n                  <div className=\"mt-2 flex gap-2\">\n                    <Button size=\"sm\" className=\"glass-button\" onClick={() => handleFriendRequestDecision(n, payload!.requestId!, true)}>\n                      수락\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" className=\"glass border-white/30 text-white\" onClick={() => handleFriendRequestDecision(n, payload!.requestId!, false)}>\n                      거절\n                    </Button>\n                  </div>\n                )}\n              </Card>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n\n  if (!mounted) return null\n  return createPortal(panel, document.body)\n}\n\n\n",
            "search-server-modal.tsx": "// \"use client\"\n\n// import React, { useState, useEffect, useRef } from \"react\"\n// import { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\n// import { Input } from \"@/components/ui/input\"\n// import { Button } from \"@/components/ui/button\"\n// import { toast } from \"sonner\"\n// import { serverService } from \"@/lib/server-service\"\n\n// interface Server {\n//   id: number\n//   name: string\n//   owner: string\n//   members: string[]\n//   resetTime: string\n// }\n\n// interface Props {\n//   open: boolean\n//   onClose: () => void\n//   onJoinSuccess: () => void\n// }\n\n// export function SearchServerModal({ open, onClose, onJoinSuccess }: Props) {\n//   const [list, setList] = useState<Server[]>([])\n//   const [page, setPage] = useState(0)\n//   const [query, setQuery] = useState(\"\")\n//   const containerRef = useRef<HTMLDivElement>(null)\n\n//   const load = async (reset = false) => {\n//     try {\n//       const data = await serverService.searchServers({ page, size: 10, q: query || undefined })\n//       setList(prev => (reset ? data : [...prev, ...data]))\n//     } catch {\n//       toast.error(\"검색 실패\", { description: \"서버 검색 중 오류가 발생했습니다.\" })\n//     }\n//   }\n\n//   useEffect(() => {\n//     if (open) {\n//       setPage(0)\n//       load(true)\n//     }\n//   }, [open, query])\n\n//   useEffect(() => {\n//     if (page > 0) load()\n//   }, [page])\n\n//   const onScroll = () => {\n//     const el = containerRef.current\n//     if (el && el.scrollTop + el.clientHeight >= el.scrollHeight - 10) {\n//       setPage(prev => prev + 1)\n//     }\n//   }\n\n//   const handleJoin = async (id: number) => {\n//     try {\n//       await serverService.joinServer(id)\n//       toast.success(\"참가 완료\", { description: \"서버 참가에 성공했습니다.\" })\n//       onJoinSuccess()\n//       onClose()\n//     } catch {\n//       toast.error(\"참가 실패\", { description: \"서버 참가에 실패했습니다.\" })\n//     }\n//   }\n\n//   return (\n//     <Dialog open={open} onOpenChange={onClose}>\n//       <DialogContent className=\"glass border-white/20\">\n//         <DialogHeader>\n//           <DialogTitle className=\"text-white\">서버 찾기</DialogTitle>\n//         </DialogHeader>\n//         <div className=\"p-4\">\n//           <Input\n//             placeholder=\"서버 이름으로 검색\"\n//             value={query}\n//             onChange={e => setQuery(e.target.value)}\n//             className=\"glass border-white/30 text-white mb-4\"\n//           />\n//           <div ref={containerRef} onScroll={onScroll} className=\"max-h-64 overflow-y-auto space-y-2\">\n//             {list.map(s => (\n//               <div key={s.id} className=\"flex items-center justify-between p-2 glass rounded-lg\">\n//                 <span className=\"text-white\">{s.name}</span>\n//                 <Button size=\"sm\" onClick={() => handleJoin(s.id)} className=\"glass-button\">\n//                   참가\n//                 </Button>\n//               </div>\n//             ))}\n//             {list.length === 0 && <div className=\"text-center text-white/60\">검색 결과가 없습니다.</div>}\n//           </div>\n//         </div>\n//       </DialogContent>\n//     </Dialog>\n//   )\n// }\n",
            "server-overview.tsx": "\"use client\"\n\nimport React, { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport {\n  Card,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n  CardContent,\n  CardFooter,\n} from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { toast } from \"sonner\"\nimport { Users, Crown, Settings as SettingsIcon, BarChart3, UserPlus } from \"lucide-react\"\nimport {\n  Dialog,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n  DialogClose,\n} from \"@/components/ui/dialog\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { authService } from \"@/lib/auth-service\"\nimport { serverService, Server, MemberInfo } from \"@/lib/server-service\"\nimport { friendService, type FriendListResponse } from \"@/lib/friend-service\"\n\n// Props 타입 정의\ninterface ServerOverviewProps {\n  server: Server\n  onServerUpdate: (srv: Server) => void\n}\n\nexport function ServerOverview({\n  server,\n  onServerUpdate,\n}: ServerOverviewProps) {\n  const router = useRouter()\n  const currentUserId = authService.getCurrentUserId()\n  const isOwner = server.ownerId === currentUserId\n  const isAdmin = server.admins.some((a) => a.id === currentUserId)\n  const isMember = server.members.some((m) => m.id === currentUserId)\n\n  const [isLoading, setIsLoading] = useState(false)\n  const [showSettings, setShowSettings] = useState(false)\n  const [newName, setNewName] = useState(server.name)\n  const [newResetTime, setNewResetTime] = useState(server.resetTime)\n  const [inviteOpen, setInviteOpen] = useState(false)\n  const [friends, setFriends] = useState<FriendListResponse>({ friends: [] })\n  const [inviteLoading, setInviteLoading] = useState(false)\n  const [serverNameConfirm, setServerNameConfirm] = useState(\"\")\n  const [requestedIds, setRequestedIds] = useState<Set<number>>(new Set())\n\n  // 친구 목록 미리 로드 (멤버 리스트에서 친구추가 버튼 노출 판단)\n  useEffect(() => {\n    let active = true\n    ;(async () => {\n      try {\n        const f = await friendService.getFriends()\n        if (active) setFriends(f)\n      } catch {}\n    })()\n    return () => { active = false }\n  }, [])\n\n  // 멤버 강퇴 핸들러\n  async function handleKickMember(member: MemberInfo) {\n    if (!confirm(`${member.nickname}을(를) 강퇴하시겠습니까?`)) return\n    setIsLoading(true)\n    try {\n      await serverService.kickMember(server.id, member.id)\n      toast.success(\"멤버 강퇴 완료\")\n      const updated = await serverService.getServer(server.id)\n      onServerUpdate(updated)\n    } catch {\n      toast.error(\"강퇴 실패\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // 관리자 임명 핸들러\n  async function handleGrantAdmin(member: MemberInfo) {\n    if (!confirm(`${member.nickname}을(를) 관리자로 임명하시겠습니까?`)) return\n    setIsLoading(true)\n    try {\n      await serverService.updateAdmin(server.id, member.id, true)\n      toast.success(\"관리자 임명 완료\")\n      const updated = await serverService.getServer(server.id)\n      onServerUpdate(updated)\n    } catch {\n      toast.error(\"관리자 임명 실패\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // 관리자 해임 핸들러\n  async function handleRevokeAdmin(member: MemberInfo) {\n    if (!confirm(`${member.nickname} 관리자 권한을 해임하시겠습니까?`)) return\n    setIsLoading(true)\n    try {\n      await serverService.updateAdmin(server.id, member.id, false)\n      toast.success(\"관리자 해임 완료\")\n      const updated = await serverService.getServer(server.id)\n      onServerUpdate(updated)\n    } catch {\n      toast.error(\"관리자 해임 실패\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // 설정 저장 핸들러\n  async function handleSaveSettings() {\n    setIsLoading(true)\n    try {\n      if (newName !== server.name) {\n        await serverService.renameServer(server.id, newName)\n      }\n      if (newResetTime !== server.resetTime) {\n        await serverService.updateResetTime(server.id, newResetTime)\n      }\n      toast.success(\"설정 저장 완료\")\n      const updated = await serverService.getServer(server.id)\n      onServerUpdate(updated)\n      setShowSettings(false)\n    } catch {\n      toast.error(\"설정 저장 실패\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // 서버 삭제 핸들러 (소유자 전용)\n  async function handleDeleteServer() {\n    if (!confirm(\"정말 서버를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.\")) return\n    setIsLoading(true)\n    try {\n      await serverService.deleteServer(server.id)\n      toast.success(\"서버가 삭제되었습니다\")\n      router.push(\"/dashboard\")\n    } catch {\n      toast.error(\"서버 삭제 실패\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <>\n    <Card className=\"glass border-white/20 h-full flex flex-col\">\n      <CardHeader>\n        <CardTitle className=\"text-white flex items-center\">\n          <Users className=\"mr-2 h-5 w-5 text-white\" /> 서버 개요\n        </CardTitle>\n        <CardDescription className=\"text-white/70\">\n          서버 정보와 멤버를 관리합니다\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-6 flex-grow\">\n        {/* 서버 기본 정보 */}\n        <div className=\"space-y-3\">\n          <h3 className=\"text-white font-medium\">서버 정보</h3>\n          <div className=\"space-y-2 text-sm text-white/70\">\n            <div className=\"flex justify-between\">\n              <span>서버 이름:</span>\n              <span>{server.name}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>초기화 시간:</span>\n              <span>{server.resetTime}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>총 멤버:</span>\n              <span>{server.members.length}명</span>\n            </div>\n            {/* 초대 */}\n            <div className=\"pt-2\">\n              <div className=\"text-white mb-1\">초대</div>\n              <div className=\"flex items-center justify-center gap-2 w-full\">\n                {isMember && (\n                  <Button\n                    className=\"glass-button\"\n                    onClick={async () => {\n                      setInviteOpen(true)\n                      try {\n                        const f = await friendService.getFriends()\n                        setFriends(f)\n                      } catch {\n                        toast.error(\"친구 목록 로드 실패\")\n                      }\n                    }}\n                  >\n                    <UserPlus className=\"h-4 w-4 mr-1\" /> 친구 초대\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 멤버 목록 */}\n        <div className=\"space-y-3\">\n          <h3 className=\"text-white font-medium\">멤버 목록</h3>\n          <div className=\"space-y-2 max-h-48 overflow-y-auto overflow-x-hidden\">\n            {server.members.map((member) => (\n              <div\n                key={member.id}\n                className=\"flex items-center justify-between px-3 py-2 glass rounded-lg hover:bg-black/10\"\n              >\n                {/* 닉네임 왼쪽 */}\n                <span className=\"text-white text-sm truncate w-32\">\n                  {member.nickname}\n                </span>\n\n                {/* 왕관 및 액션 버튼 우측 */}\n                <div className=\"flex items-center space-x-2\">\n                  {member.id === server.ownerId && (\n                    <Crown className=\"h-4 w-4 text-yellow-400\" />\n                  )}\n                  {server.admins.some((a) => a.id === member.id) &&\n                    member.id !== server.ownerId && (\n                      <Crown className=\"h-4 w-4 text-blue-400\" />\n                    )}\n\n                  {/* 친구 추가 아이콘: 본인이 아니고, 아직 친구가 아니며, 요청을 보내지 않은 경우 */}\n                  {member.id !== currentUserId &&\n                    !friends.friends.some((f) => f.id === member.id) &&\n                    !requestedIds.has(member.id) && (\n                      <Button\n                        size=\"icon\"\n                        variant=\"ghost\"\n                        className=\"hover:bg-white/10\"\n                        title=\"친구 추가\"\n                        onClick={async () => {\n                          try {\n                            await friendService.sendRequestByUserId(member.id)\n                            toast.success(\"친구 요청을 보냈습니다\")\n                            setRequestedIds((prev) => {\n                              const next = new Set(prev)\n                              next.add(member.id)\n                              return next\n                            })\n                          } catch {\n                            toast.error(\"친구 요청 실패\")\n                          }\n                        }}\n                      >\n                        <UserPlus className=\"h-4 w-4\" />\n                      </Button>\n                    )}\n\n                  {/* 소유자 또는 관리자만 액션 */}\n                  {(isOwner || isAdmin) && member.id !== server.ownerId && (\n                    <>\n                      {/* 임명/해임 (소유자만) */}\n                      {!server.admins.some((a) => a.id === member.id) && isOwner && (\n                        <Button\n                          onClick={() => handleGrantAdmin(member)}\n                          size=\"sm\"\n                          className=\"glass-button text-white\"\n                          disabled={isLoading}\n                        >\n                          임명\n                        </Button>\n                      )}\n                      {server.admins.some((a) => a.id === member.id) && isOwner && (\n                        <Button\n                          onClick={() => handleRevokeAdmin(member)}\n                          size=\"sm\"\n                          variant=\"outline\"\n                          className=\"glass border-white/30 text-white\"\n                          disabled={isLoading}\n                        >\n                          해임\n                        </Button>\n                      )}\n\n                      {/* 강퇴: 관리자에게는 표시하지 않음 */}\n                      {!server.admins.some((a) => a.id === member.id) && (\n                        <Button\n                          onClick={() => handleKickMember(member)}\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          className=\"text-red-400 truncate hover:text-red-300 hover:bg-red-500/20\"\n                          disabled={isLoading}\n                        >\n                          강퇴\n                        </Button>\n                      )}\n                    </>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* 통계 및 설정 버튼 */}\n        <div className=\"space-y-2 p-4\">\n          <Button\n            variant=\"outline\"\n             className=\"w-full glass border-white/30 text-white hover:bg-black/10 hover:text-white\"\n            onClick={() => router.push(`/stats/${server.id}`)}\n          >\n            <BarChart3 className=\"mr-2 h-4 w-4 text-white\" /> 통계 보기\n          </Button>\n          {(isOwner || isAdmin) && (\n            <Dialog open={showSettings} onOpenChange={setShowSettings}>\n              <DialogTrigger asChild>\n                <Button  className=\"w-full glass border-white/30 text-white hover:bg-black/10 hover:text-white\">\n                  <SettingsIcon className=\"mr-2 h-4 w-4 text-white\" /> 서버 설정\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"glass border-white/20 max-w-md\">\n                <DialogHeader>\n                  <DialogTitle className=\"text-white\">서버 설정</DialogTitle>\n                </DialogHeader>\n                <div className=\"space-y-4\">\n                  <div className=\"space-y-1\">\n                    <Label htmlFor=\"srv-name\" className=\"text-white\">\n                      서버 이름\n                    </Label>\n                    <Input\n                      id=\"srv-name\"\n                      value={newName}\n                      onChange={(e) => setNewName(e.target.value)}\n                      className=\"glass border-white/30 text-white\"\n                    />\n                  </div>\n                  <div className=\"space-y-1\">\n                    <Label htmlFor=\"srv-reset\" className=\"text-white\">\n                      초기화 시간\n                    </Label>\n                    <Input\n                      id=\"srv-reset\"\n                      type=\"time\"\n                      value={newResetTime}\n                      onChange={(e) => setNewResetTime(e.target.value)}\n                      className=\"glass border-white/30 text-white\"\n                    />\n                  </div>\n                </div>\n                <DialogFooter>\n                  <DialogClose asChild>\n                    <Button\n                      variant=\"outline\"\n                      className=\"glass border-white/30 hover:bg-black/10\"\n                    >\n                      취소\n                    </Button>\n                  </DialogClose>\n                  <Button\n                    onClick={handleSaveSettings}\n                    className=\"glass-button text-white\"\n                    disabled={isLoading}\n                  >\n                    저장\n                  </Button>\n                </DialogFooter>\n                {isOwner && (\n                  <div className=\"mt-4 border-t border-white/20 pt-4 space-y-2\">\n                    <Label htmlFor=\"srv-delete-confirm\" className=\"text-white\">서버 이름을 입력하여 삭제를 확인하세요</Label>\n                    <Input\n                      id=\"srv-delete-confirm\"\n                      value={serverNameConfirm}\n                      onChange={(e) => setServerNameConfirm(e.target.value)}\n                      placeholder={server.name}\n                      className=\"glass border-white/30 text-white\"\n                    />\n                    <Button\n                      variant=\"destructive\"\n                      className=\"w-full\"\n                      onClick={handleDeleteServer}\n                      disabled={isLoading || serverNameConfirm !== server.name}\n                    >\n                      서버 삭제\n                    </Button>\n                  </div>\n                )}\n              </DialogContent>\n            </Dialog>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n    {/* 초대 모달 */}\n    <Dialog open={inviteOpen} onOpenChange={setInviteOpen} key=\"invite\">\n      <DialogContent className=\"glass border-white/20 max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white\">친구 초대</DialogTitle>\n        </DialogHeader>\n        <div className=\"space-y-2 max-h-72 overflow-y-auto\">\n          {friends.friends.length === 0 && (\n            <div className=\"text-white/60 text-sm\">초대 가능한 친구가 없습니다.</div>\n          )}\n          {friends.friends.map((f) => (\n            <div key={f.id} className=\"flex items-center justify-between p-2 glass rounded-lg\">\n              <div className=\"text-white text-sm\">\n                {f.nickname} <span className=\"text-white/50\">@{f.username}</span>\n              </div>\n              <Button\n                size=\"sm\"\n                className=\"glass-button\"\n                disabled={inviteLoading}\n                onClick={async () => {\n                  setInviteLoading(true)\n                  try {\n                    await serverService.inviteUser(server.id, f.id)\n                    toast.success(\"초대가 전송되었습니다\")\n                  } catch {\n                    toast.error(\"초대 전송 실패\")\n                  } finally {\n                    setInviteLoading(false)\n                  }\n                }}\n              >\n                초대\n              </Button>\n            </div>\n          ))}\n        </div>\n        <DialogFooter>\n          <DialogClose asChild>\n            <Button variant=\"outline\" className=\"glass border-white/30 text-white\">닫기</Button>\n          </DialogClose>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n    {/* 친구 추가 모달 제거 요청에 따라 삭제됨 */}\n    </>\n  )\n}\n",
            "timetable-view.tsx": "// components/TimetableView.tsx\n\"use client\"\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport {\n  Select,\n  SelectGroup,\n  SelectLabel,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { toast } from \"sonner\"\nimport { timetableService } from \"@/lib/timetable-service\"\nimport { gameService } from \"@/lib/game-service\"\nimport { serverService } from \"@/lib/server-service\"\nimport { Calendar, Clock, Filter, Users, GamepadIcon } from \"lucide-react\"\n\ninterface TimetableEntry {\n  id: number\n  user: string\n  slot: string\n  gameId: number\n  gameName: string\n  custom: boolean\n}\n\ninterface Game {\n  id: number\n  name: string\n}\n\ninterface TimetableViewProps {\n  serverId: number\n}\n\ninterface UserSchedule {\n  user: string\n  joinTime: number // 시간 (0-23)\n  gameName: string\n  custom: boolean\n  entry: TimetableEntry\n}\n\nexport function TimetableView({ serverId }: TimetableViewProps) {\n  const today = new Date().toLocaleDateString(\"en-CA\")\n  const [entries, setEntries] = useState<TimetableEntry[]>([])\n  const [defaultGames, setDefaultGames] = useState<Game[]>([])\n  const [customGames, setCustomGames] = useState<Game[]>([])\n  const [selectedDate, setSelectedDate] = useState<string>(today)\n  const [selectedTime, setSelectedTime] = useState<string>(\"\")\n  const [selectedGame, setSelectedGame] = useState<string>(\"\")\n  const [gameFilter, setGameFilter] = useState<string>(\"\")\n  const [sortByGame, setSortByGame] = useState<boolean>(false)\n  const [isLoading, setIsLoading] = useState<boolean>(true)\n  const [hoveredUser, setHoveredUser] = useState<string | null>(null)\n  const [resetHour, setResetHour] = useState<number | null>(null)\n\n  // 30분 단위 시간 옵션 생성\n  const timeOptions = useMemo(() => {\n    const times: string[] = []\n    for (let h = 0; h < 24; h++) {\n      const hour = h.toString().padStart(2, \"0\")\n      times.push(`${hour}:00`)\n      times.push(`${hour}:30`)\n    }\n    return times\n  }, [])\n\n  // 사용자별 스케줄 데이터 처리 (게임별로 묶고, 게임 내에서는 시간 순)\n  const userSchedules = useMemo(() => {\n    const schedulesRaw: UserSchedule[] = entries.map((entry) => {\n      const date = new Date(entry.slot)\n      const joinTime = date.getHours()\n      return {\n        user: entry.user,\n        joinTime,\n        gameName: entry.gameName,\n        custom: entry.custom,\n        entry,\n      }\n    })\n\n    // 1) 시간 순으로 한 번 정렬\n    const sortedByTime = [...schedulesRaw].sort((a, b) => a.joinTime - b.joinTime)\n\n    // 2) 최초 등장 순서대로 게임 그룹 순서를 결정\n    const gameOrder: string[] = []\n    for (const s of sortedByTime) {\n      if (!gameOrder.includes(s.gameName)) gameOrder.push(s.gameName)\n    }\n\n    // 3) 각 게임 그룹별로 시간 순 정렬을 유지한 채로 이어붙이기\n    const grouped = gameOrder.flatMap((game) => sortedByTime.filter((s) => s.gameName === game))\n\n    return grouped\n  }, [entries])\n\n  const hours = Array.from({ length: 24 }, (_, i) => i)\n\n  useEffect(() => { loadData() }, [serverId])\n  useEffect(() => { loadTimetable() }, [gameFilter, sortByGame])\n\n  const loadData = async () => {\n    try {\n      const [defaultData, customData] = await Promise.all([\n        gameService.getDefaultGames(),\n        gameService.getCustomGames(serverId),\n      ])\n      setDefaultGames(defaultData.defaultGames)\n      setCustomGames(customData.customGames)\n      const serverInfo = await serverService.getServer(serverId)\n      setResetHour(Number(serverInfo.resetTime.split(\":\")[0]))\n      await loadTimetable()\n    } catch {\n      toast.error(\"데이터 로드 실패\", { description: \"데이터를 불러오는데 실패했습니다.\" })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const loadTimetable = async () => {\n    try {\n      const data = await timetableService.getTimetable(serverId, gameFilter, sortByGame)\n      setEntries(data)\n    } catch {\n      toast.error(\"타임테이블 로드 실패\", { description: \"타임테이블을 불러오는데 실패했습니다.\" })\n    }\n  }\n\n  const handleAddEntry = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!selectedTime || !selectedGame) {\n      toast.error(\"입력 오류\", { description: \"모든 필드를 입력해주세요.\" })\n      return\n    }\n    const slot = `${selectedDate}T${selectedTime}:00`\n    const [type, id] = selectedGame.split(\"-\")\n    try {\n      await timetableService.addEntry({\n        serverId,\n        slot,\n        defaultGameId: type === \"default\" ? Number(id) : undefined,\n        customGameId: type === \"custom\" ? Number(id) : undefined,\n      })\n      await loadTimetable()\n      setSelectedTime(\"\")\n      setSelectedGame(\"\")\n      toast.success(\"예약 완료\", { description: \"게임이 예약되었습니다.\" })\n    } catch {\n      toast.error(\"예약 실패\", { description: \"게임 예약 중 오류가 발생했습니다.\" })\n    }\n  }\n\n  const formatDateTime = (dateTime: string) =>\n    new Date(dateTime).toLocaleString(\"ko-KR\", { month: \"short\", day: \"numeric\", hour: \"2-digit\", minute: \"2-digit\" })\n\n  const isUserOnlineAtHour = (schedule: UserSchedule, hour: number) => hour >= schedule.joinTime\n\n  // 게임별 색상 고정\n  const getGameColor = (gameName: string, custom: boolean) => {\n    const colors = [\n      \"from-blue-500/60 to-blue-600/40 border-blue-400/60\",\n      \"from-green-500/60 to-green-600/40 border-green-400/60\",\n      \"from-purple-500/60 to-purple-600/40 border-purple-400/60\",\n      \"from-orange-500/60 to-orange-600/40 border-orange-400/60\",\n      \"from-pink-500/60 to-pink-600/40 border-pink-400/60\",\n      \"from-cyan-500/60 to-cyan-600/40 border-cyan-400/60\",\n      \"from-red-500/60 to-red-600/40 border-red-400/60\",\n      \"from-indigo-500/60 to-indigo-600/40 border-indigo-400/60\",\n    ]\n    const hash = gameName.split(\"\").reduce((a, b) => ((a << 5) - a + b.charCodeAt(0)) & a, 0)\n    return colors[Math.abs(hash) % colors.length]\n  }\n\n  if (isLoading) {\n    return (\n      <Card className=\"glass border-white/20 h-full\">\n        <CardHeader>\n          <CardTitle className=\"text-white flex items-center\">\n            <Calendar className=\"mr-2 h-5 w-5\" />합류 시간표\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-white/70\">로딩 중...</div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <Card className=\"glass border-white/20 h-full\">\n      <CardHeader>\n        <CardTitle className=\"text-white flex items-center\">\n          <Calendar className=\"mr-2 h-5 w-5\" />합류 시간표\n        </CardTitle>\n        <CardDescription className=\"text-white/70\">\n          친구들이 언제 합류하는지 확인하고 예약하세요\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {userSchedules.length > 0 && (\n          <div className=\"glass rounded-lg p-4 overflow-x-auto\">\n            <h3 className=\"text-white font-medium mb-4 flex items-center text-sm\">\n              <Users className=\"mr-2 h-5 w-5\" />오늘의 합류 예정 ({userSchedules.length}명)\n            </h3>\n            <div className=\"min-w-[600px]\">\n              <div className=\"flex items-center border-b border-white/20 pb-2\">\n                <div className=\"w-32 text-xs text-white/80 font-medium\">사용자 / 게임</div>\n                <div className=\"flex-1 flex\">\n                  {hours.map((hour) => (\n                    <div key={hour} className=\"flex-1 text-center\">\n                      <div className=\"text-[10px] text-white/60 font-medium\">\n                        {hour.toString().padStart(2, \"0\")}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              <div className=\"space-y-2 mt-3\">\n                {userSchedules.map((schedule) => (\n                  <div\n                    key={`${schedule.user}-${schedule.entry.id}`}\n                    className=\"flex items-center group\"\n                    onMouseEnter={() => setHoveredUser(schedule.user)}\n                    onMouseLeave={() => setHoveredUser(null)}\n                  >\n                    <div className=\"w-32 pr-2\">\n                      <div className=\"text-white font-medium text-[12px] truncate\">\n                        {schedule.user}\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <GamepadIcon className=\"h-3 w-3 text-white/60\" />\n                        <span className=\"text-[10px] text-white/70 truncate\">\n                          {schedule.gameName}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex-1 flex h-8 gap-px\">\n                      {hours.map((hour) => (\n                        <div\n                          key={hour}\n                          className={`flex-1 relative transition-all duration-300 ${\n                            isUserOnlineAtHour(schedule, hour)\n                              ? `bg-gradient-to-r ${getGameColor(schedule.gameName, schedule.custom)} border ${\n                                  hoveredUser === schedule.user ? \"scale-y-110 brightness-125\" : \"\"\n                                }`\n                              : \"bg-white/5 border border-white/10\"\n                          } ${\n                            hour === schedule.joinTime\n                              ? \"rounded-l-sm border-l-2\"\n                              : hour === 23 && isUserOnlineAtHour(schedule, hour)\n                              ? \"rounded-r-sm border-r-2\"\n                              : \"\"\n                          }`}\n                        >\n                          {hour === new Date().getHours() && (\n                            <div className=\"absolute top-0 left-1/2 w-[1px] h-full bg-green-400 opacity-80\" />\n                          )}\n                          {resetHour !== null && hour === resetHour && (\n                            <div className=\"absolute top-0 left-1/2 w-[1px] h-full bg-red-400 opacity-80\" />\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <div className=\"mt-4 pt-2 border-t border-white/20 text-[10px] text-white/60 flex gap-4\">\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-4 h-2 bg-gradient-to-r from-blue-500/60 to-blue-600/40 rounded-sm\" />\n                  온라인 시간\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-[1px] h-3 bg-green-400\" />\n                  현재 시간\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"w-[1px] h-3 bg-red-400\" />\n                  초기화 시간\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <form onSubmit={handleAddEntry} className=\"space-y-3 p-4 glass rounded-lg\">\n          <h3 className=\"text-white font-medium text-sm\">새 합류 시간 예약</h3>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n            <Input\n              type=\"date\"\n              value={selectedDate}\n              disabled\n              className=\"glass border-white/30 text-white text-sm\"\n            />\n            <Select\n              value={selectedTime}\n              onValueChange={setSelectedTime}\n              required\n            >\n              <SelectTrigger className=\"glass border-white/30 text-white text-sm\">\n                <SelectValue placeholder=\"시간 선택\" />\n              </SelectTrigger>\n              <SelectContent className=\"glass border-white/20 text-white text-sm max-h-60 overflow-y-auto\">\n                <SelectGroup>\n                  <SelectLabel>시간</SelectLabel>\n                  {timeOptions.map((time) => (\n                    <SelectItem key={time} value={time}>\n                      {time}\n                    </SelectItem>\n                  ))}\n                </SelectGroup>\n              </SelectContent>\n            </Select>\n          </div>\n          <Select\n            value={selectedGame}\n            onValueChange={setSelectedGame}\n            defaultValue=\"\"\n          >\n            <SelectTrigger className=\"glass border-white/30 text-white text-sm\">\n              <SelectValue placeholder=\"게임 선택\" />\n            </SelectTrigger>\n            <SelectContent className=\"glass border-white/20 text-white text-sm max-h-60 overflow-y-auto\">\n              <SelectGroup>\n                <SelectLabel>기본 게임</SelectLabel>\n                {defaultGames.map((game) => (\n                  <SelectItem key={`default-${game.id}`} value={`default-${game.id}`}>\n                    {game.name}\n                  </SelectItem>\n                ))}\n              </SelectGroup>\n              <SelectGroup>\n                <SelectLabel>커스텀 게임</SelectLabel>\n                {customGames.map((game) => (\n                  <SelectItem key={`custom-${game.id}`} value={`custom-${game.id}`}>\n                    {game.name}\n                  </SelectItem>\n                ))}\n              </SelectGroup>\n            </SelectContent>\n          </Select>\n          <Button\n            type=\"submit\"\n            className=\"w-full glass border-white/30 text-white hover:bg-black/10 hover:text-white\"\n          >\n            합류 시간 예약\n          </Button>\n        </form>\n\n        <div className=\"flex flex-col sm:flex-row gap-2\">\n          <Input\n            placeholder=\"게임 이름으로 필터\"\n            value={gameFilter}\n            onChange={(e) => setGameFilter(e.target.value)}\n            className=\"glass border-white/30 text-white placeholder:text-white/50 text-sm\"\n          />\n          <Button\n            onClick={() => setSortByGame(!sortByGame)}\n            variant=\"outline\"\n            className={`glass border-white/30 text-white hover:bg-black/10 text-sm ${\n              sortByGame ? \"bg-white/10\" : \"\"\n            }`}\n          >\n            <Filter className=\"mr-1 h-4 w-4\" /> 게임순\n          </Button>\n        </div>\n\n        <div className=\"space-y-2 max-h-64 sm:max-h-96 overflow-y-auto\">\n          {entries.map((entry) => (\n            <div key={entry.id} className=\"p-3 glass rounded-lg\">\n              <div className=\"flex items-center justify-between mb-1 text-sm\">\n                <div className=\"flex items-center space-x-1\">\n                  <Clock className=\"h-4 w-4 text-white/60\" />\n                  <span className=\"text-white font-medium text-[12px]\">\n                    {formatDateTime(entry.slot)}\n                  </span>\n                </div>\n                <Badge variant={entry.custom ? \"secondary\" : \"default\"} className=\"text-[10px]\">\n                  {entry.custom ? \"커스텀\" : \"기본\"}\n                </Badge>\n              </div>\n              <div className=\"text-white/80 text-[12px]\">\n                <div>게임: {entry.gameName}</div>\n                <div>플레이어: {entry.user}</div>\n              </div>\n            </div>\n          ))}\n          {entries.length === 0 && (\n            <div className=\"text-center py-6 text-white/60 text-sm\">\n              예약된 게임이 없습니다.\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n"
        },
        "icons": {
            "__files__": {
                "discord-icon.tsx": "interface DiscordIconProps {\n  className?: string\n}\n\nexport function DiscordIcon({ className = \"w-6 h-6\" }: DiscordIconProps) {\n  return (\n    <svg className={className} viewBox=\"0 0 24 24\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z\" />\n    </svg>\n  )\n}\n"
            }
        },
        "ui": {
            "__files__": {
                "badge.tsx": "import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-xl border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-muted text-accent-foreground hover:bg-muted/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/70\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/85\",\n        outline: \"text-muted-foreground border-muted\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n",
                "button.tsx": "import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 will-change-transform\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-white/10 text-foreground border border-white/10 backdrop-blur-sm shadow-sm hover:bg-white/15 active:scale-[0.98]\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-md hover:bg-destructive/85 active:scale-[0.98]\",\n        outline:\n          \"border border-white/15 bg-transparent text-foreground backdrop-blur-sm hover:bg-white/10\",\n        secondary:\n          \"bg-white/5 text-foreground shadow-sm hover:bg-white/10\",\n        ghost: \"hover:bg-white/10 hover:text-foreground\",\n        link: \"text-muted-foreground underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-8 rounded-lg px-3 text-xs\",\n        lg: \"h-11 rounded-xl px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n",
                "card.tsx": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-2xl border border-white/10 bg-card/70 text-card-foreground shadow-sm backdrop-blur-md\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n",
                "dialog.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-white/10 bg-background/80 backdrop-blur-xl p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-2xl\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n",
                "input.tsx": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-xl border border-input/60 bg-black/10 backdrop-blur-sm px-3 py-2 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n",
                "label.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n",
                "select.tsx": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between whitespace-nowrap rounded-xl border border-input/60 bg-black/10 backdrop-blur-sm px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-xl border border-white/10 bg-popover/80 backdrop-blur-md text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"
            }
        }
    },
    "lib": {
        "__files__": {
            "auth-service.ts": "const API_BASE = process.env.NEXT_PUBLIC_API_URL\n\ninterface LoginRequest {\n  username: string\n  password: string\n}\n\ninterface SignupRequest {\n  username: string\n  nickname: string\n  password: string\n}\n\n// 백엔드 응답 형태에 맞춰 LoginResponse 수정\ninterface LoginResponse {\n  token: string\n  message: string\n  userId: number    // 사용자 ID\n  nickname: string  // 사용자 닉네임\n}\n\n// 백엔드에서 Signup 시 userId, nickname을 반환하면 저장할 수 있도록 옵션 추가\ninterface SignupResponse {\n  message: string\n  userId?: number\n  nickname?: string\n}\n\nclass AuthService {\n  private tokenKey = \"auth-token\"\n  private userKey = \"current-user\"\n  private userIdKey = \"current-user-id\"\n  private fcmTokenKey = \"fcm-token\"\n\n  setToken(token: string) {\n    localStorage.setItem(this.tokenKey, token)\n  }\n\n  setCurrentUser(user: { id: number; nickname: string }) {\n    localStorage.setItem(this.userIdKey, String(user.id))\n    localStorage.setItem(this.userKey, user.nickname)\n  }\n\n  setFcmToken(token: string) {\n    localStorage.setItem(this.fcmTokenKey, token)\n  }\n\n  getFcmToken(): string | null {\n    return typeof window !== \"undefined\" ? localStorage.getItem(this.fcmTokenKey) : null\n  }\n\n  async login(credentials: LoginRequest): Promise<LoginResponse> {\n    const response = await fetch(`${API_BASE}/auth/login`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(credentials),\n    })\n    if (!response.ok) throw new Error(\"Login failed\")\n\n    const data: LoginResponse = await response.json()\n\n    // 토큰 및 사용자 정보 저장\n    this.setToken(data.token)\n    this.setCurrentUser({ id: data.userId, nickname: data.nickname })\n\n    return data\n  }\n\n  async signup(credentials: SignupRequest): Promise<SignupResponse> {\n    const response = await fetch(`${API_BASE}/auth/signup`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(credentials),\n    })\n    if (!response.ok) throw new Error(\"Signup failed\")\n\n    const data: SignupResponse = await response.json()\n\n    // 응답에 userId와 nickname이 포함되면 저장\n    if (data.userId !== undefined && data.nickname) {\n      this.setCurrentUser({ id: data.userId, nickname: data.nickname })\n    }\n    return data\n  }\n\n  async logout(): Promise<void> {\n    const token = this.getToken()\n    const fcmToken = this.getFcmToken()\n    if (token) {\n      try {\n        await fetch(`${API_BASE}/auth/logout`, {\n          method: \"POST\",\n          headers: { Authorization: `Bearer ${token}` },\n        })\n      } catch {\n        // 무시\n      }\n    }\n    if (fcmToken) {\n      try {\n        const url = new URL(`${API_BASE}/push-tokens`)\n        url.searchParams.set(\"token\", fcmToken)\n        await fetch(url, { method: \"DELETE\", headers: this.getAuthHeaders() })\n      } catch {}\n    }\n    localStorage.removeItem(this.tokenKey)\n    localStorage.removeItem(this.userKey)\n    localStorage.removeItem(this.userIdKey)\n    localStorage.removeItem(this.fcmTokenKey)\n  }\n\n  getToken(): string | null {\n    return typeof window !== \"undefined\" ? localStorage.getItem(this.tokenKey) : null\n  }\n\n  getCurrentUser(): string | null {\n    return typeof window !== \"undefined\" ? localStorage.getItem(this.userKey) : null\n  }\n\n  getCurrentUserId(): number | null {\n    const v = typeof window !== \"undefined\" ? localStorage.getItem(this.userIdKey) : null\n    return v ? Number(v) : null\n  }\n\n  isAuthenticated(): boolean {\n    return !!this.getToken()\n  }\n\n  getAuthHeaders(): Record<string, string> {\n    const token = this.getToken()\n    return token ? { Authorization: `Bearer ${token}` } : {}\n  }\n}\n\nexport const authService = new AuthService()\n",
            "fcm.ts": "import { initializeApp } from \"firebase/app\"\nimport { getMessaging, getToken, onMessage, isSupported } from \"firebase/messaging\"\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDfwB0dOlR86iQfVzZTuO1G0jYoI6ZTMfY\",\n  authDomain: \"gamesync-0212.firebaseapp.com\",\n  projectId: \"gamesync-0212\",\n  storageBucket: \"gamesync-0212.firebasestorage.app\",\n  messagingSenderId: \"551919197948\",\n  appId: \"1:551919197948:web:cb8eaca23e4596c3008179\",\n  measurementId: \"G-EE1FWZ9B9M\"\n}\n\nlet messagingPromise: Promise<import(\"firebase/messaging\").Messaging> | null = null\n\nexport async function ensureMessaging() {\n  if (!(await isSupported())) throw new Error(\"FCM not supported in this browser\")\n  if (!messagingPromise) {\n    const app = initializeApp(firebaseConfig)\n    messagingPromise = Promise.resolve(getMessaging(app))\n  }\n  return messagingPromise\n}\n\nexport async function requestFcmToken(vapidKey: string): Promise<string | null> {\n  try {\n    const messaging = await ensureMessaging()\n    // register SW explicitly\n    const swReg = await navigator.serviceWorker.register(\"/firebase-messaging-sw.js\")\n    const token = await getToken(messaging, { vapidKey, serviceWorkerRegistration: swReg })\n    return token || null\n  } catch (e) {\n    return null\n  }\n}\n\nexport async function onForegroundMessage(handler: (payload: any) => void) {\n  const messaging = await ensureMessaging()\n  onMessage(messaging, handler)\n}\n\n\n",
            "fetch-with-auth.ts": "// lib/fetch-with-auth.ts\nimport { authService } from \"./auth-service\"\n\nexport async function fetchWithAuth(input: RequestInfo, init: RequestInit = {}) {\n  const headers = {\n    ...init.headers,\n    ...authService.getAuthHeaders(),\n  }\n\n  const res = await fetch(input, { ...init, headers })\n\n  if (res.status === 403) {\n    // 인증 만료\n    authService.logout()\n    // 로그인 페이지로 바로 이동\n    if (typeof window !== \"undefined\") window.location.href = \"/auth/login\"\n    // 이후 코드는 실행되지 않도록\n    throw new Error(\"UNAUTHORIZED\")\n  }\n\n  return res\n}\n",
            "friend-service.ts": "const API_BASE = process.env.NEXT_PUBLIC_API_URL\n\nimport { fetchWithAuth } from \"./fetch-with-auth\"\n\nexport interface SimpleUser {\n  id: number\n  username: string\n  nickname: string\n}\n\nexport interface FriendListResponse {\n  friends: SimpleUser[]\n}\n\nexport interface PendingRequest {\n  requestId: number\n  user: SimpleUser\n}\n\nexport interface PendingListResponse {\n  requests: PendingRequest[]\n}\n\nexport interface FriendCodeResponse {\n  code: string\n}\n\nclass FriendService {\n  async getFriends(): Promise<FriendListResponse> {\n    const res = await fetchWithAuth(`${API_BASE}/friends`)\n    if (!res.ok) throw new Error(\"Failed to fetch friends\")\n    return res.json()\n  }\n\n  async getPendingReceived(): Promise<PendingListResponse> {\n    const res = await fetchWithAuth(`${API_BASE}/friends/requests/received`)\n    if (!res.ok) throw new Error(\"Failed to fetch received requests\")\n    return res.json()\n  }\n\n  async getPendingSent(): Promise<PendingListResponse> {\n    const res = await fetchWithAuth(`${API_BASE}/friends/requests/sent`)\n    if (!res.ok) throw new Error(\"Failed to fetch sent requests\")\n    return res.json()\n  }\n\n  async sendRequestByUserId(userId: number): Promise<void> {\n    const res = await fetchWithAuth(`${API_BASE}/friends/requests`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ receiverId: userId }),\n    })\n    if (!res.ok) throw new Error(\"Failed to send request\")\n  }\n\n  async sendRequestByCode(friendCode: string): Promise<void> {\n    const res = await fetchWithAuth(`${API_BASE}/friends/requests`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ friendCode }),\n    })\n    if (!res.ok) throw new Error(\"Failed to send request\")\n  }\n\n  async respond(requestId: number, accept: boolean): Promise<void> {\n    const res = await fetchWithAuth(`${API_BASE}/friends/requests/${requestId}/respond`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ accept }),\n    })\n    if (!res.ok) throw new Error(\"Failed to respond request\")\n  }\n\n  async getMyFriendCode(): Promise<FriendCodeResponse> {\n    const res = await fetchWithAuth(`${API_BASE}/users/me/friend-code`)\n    if (!res.ok) throw new Error(\"Failed to fetch friend code\")\n    return res.json()\n  }\n}\n\nexport const friendService = new FriendService()\n\n\n",
            "game-service.ts": "import { authService } from \"./auth-service\"\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL\n\ninterface Game {\n  id: number\n  name: string\n}\n\ninterface DefaultGameListResponse {\n  defaultGames: Game[]\n}\n\ninterface CustomGameListResponse {\n  customGames: Game[]\n}\n\ninterface CustomGameRequest {\n  name: string\n}\n\ninterface ScheduledUserListResponse {\n  users: { username: string }[]\n}\n\nclass GameService {\n  async getDefaultGames(): Promise<DefaultGameListResponse> {\n    const response = await fetch(`${API_BASE}/games/default`, {\n      headers: authService.getAuthHeaders(),\n    })\n    if (!response.ok) throw new Error(\"Failed to fetch default games\")\n    return response.json()\n  }\n\n  async getCustomGames(serverId: number): Promise<CustomGameListResponse> {\n    const response = await fetch(`${API_BASE}/servers/${serverId}/custom-games`, {\n      headers: authService.getAuthHeaders(),\n    })\n    if (!response.ok) throw new Error(\"Failed to fetch custom games\")\n    return response.json()\n  }\n\n  async addCustomGame(serverId: number, data: CustomGameRequest): Promise<Game> {\n    const response = await fetch(`${API_BASE}/servers/${serverId}/custom-games`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...authService.getAuthHeaders(),\n      },\n      body: JSON.stringify(data),\n    })\n    if (!response.ok) throw new Error(\"Failed to add custom game\")\n    return response.json()\n  }\n\n  async getScheduledUsers(serverId: number, gameId: number): Promise<ScheduledUserListResponse> {\n    const response = await fetch(\n      `${API_BASE}/servers/${serverId}/custom-games/${gameId}/scheduled-users`,\n      { headers: authService.getAuthHeaders() }\n    )\n    if (!response.ok) throw new Error(\"Failed to fetch scheduled users\")\n    return response.json()\n  }\n\n  async deleteCustomGame(serverId: number, gameId: number): Promise<void> {\n    const response = await fetch(\n      `${API_BASE}/servers/${serverId}/custom-games/${gameId}`,\n      {\n        method: \"DELETE\",\n        headers: authService.getAuthHeaders(),\n      }\n    )\n    if (!response.ok) throw new Error(\"Failed to delete custom game\")\n  }\n}\n\nexport const gameService = new GameService()",
            "notification-service.ts": "const API_BASE = process.env.NEXT_PUBLIC_API_URL\n\nimport { authService } from \"./auth-service\"\n\nexport interface NotificationItem {\n  id: number\n  type: \"INVITE\" | \"TIMETABLE\" | \"GENERIC\"\n  title: string\n  message: string | null\n  read: boolean\n  createdAt: string\n}\n\nexport interface NotificationListResponse {\n  notifications: NotificationItem[]\n  unreadCount: number\n}\n\nclass NotificationService {\n  async getNotifications(): Promise<NotificationListResponse> {\n    const res = await fetch(`${API_BASE}/notifications`, {\n      headers: authService.getAuthHeaders(),\n    })\n    if (!res.ok) throw new Error(\"Failed to fetch notifications\")\n    return res.json()\n  }\n\n  async registerPushToken(token: string, platform: string = \"web\"): Promise<void> {\n    const res = await fetch(`${API_BASE}/push-tokens`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ token, platform }),\n    })\n    if (!res.ok) throw new Error(\"Failed to register push token\")\n  }\n\n  async unregisterPushToken(token: string): Promise<void> {\n    const url = new URL(`${API_BASE}/push-tokens`)\n    url.searchParams.set(\"token\", token)\n    const res = await fetch(url, {\n      method: \"DELETE\",\n      headers: authService.getAuthHeaders(),\n    })\n    if (!res.ok) throw new Error(\"Failed to unregister push token\")\n  }\n\n  async markAsRead(id: number): Promise<void> {\n    const res = await fetch(`${API_BASE}/notifications/${id}/read`, {\n      method: \"POST\",\n      headers: authService.getAuthHeaders(),\n    })\n    if (!res.ok) throw new Error(\"Failed to mark as read\")\n  }\n\n  async clearAll(): Promise<void> {\n    const res = await fetch(`${API_BASE}/notifications`, {\n      method: \"DELETE\",\n      headers: authService.getAuthHeaders(),\n    })\n    if (!res.ok) throw new Error(\"Failed to clear notifications\")\n  }\n}\n\nexport const notificationService = new NotificationService()\n\n\n",
            "server-service.ts": "import { authService } from \"./auth-service\";\nimport { fetchWithAuth } from \"./fetch-with-auth\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL\n\nexport interface MemberInfo {\n  id: number;\n  nickname: string;\n  username: string;\n}\n\nexport interface Server {\n  id: number;\n  name: string;\n  ownerId: number\n  owner: string; // 백엔드에서 nickname으로 받는중\n  members: MemberInfo[];\n  inviteCode: string;\n  admins: MemberInfo[];\n  resetTime: string;\n  description?: string | null;\n  maxMembers?: number | null;\n  resetPaused?: boolean;\n}\n\ninterface SearchParams {\n  page: number;\n  size: number;\n  q?: string;\n}\n\nclass ServerService {\n  async createServer(data: { name: string; resetTime: string }): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify(data),\n    });\n    if (!res.ok) throw new Error(\"Failed to create server\");\n    return res.json();\n  }\n\n  async getServers(): Promise<Server[]> {\n    const res = await fetch(`${API_BASE}/servers`, { headers: authService.getAuthHeaders() });\n    if (!res.ok) throw new Error(\"Failed to fetch servers\");\n    return res.json();\n  }\n\n  async getServer(id: number): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers/${id}`, { headers: authService.getAuthHeaders() });\n    if (!res.ok) throw new Error(\"Failed to fetch server\");\n    return res.json();\n  }\n\n  async getMyServers(): Promise<Server[]> {\n    const res = await fetchWithAuth(`${API_BASE}/servers/mine`);\n    if (!res.ok) throw new Error(\"Failed to fetch my servers\");\n    return res.json();\n  }\n\n  async joinByCode(code: string): Promise<Server> {\n  const res = await fetch(`${API_BASE}/servers/join?code=${code}`, {\n    method: \"POST\",\n    headers: authService.getAuthHeaders(),\n  })\n  if (!res.ok) throw new Error(\"Invalid code\")\n  return res.json()\n}\n\n  async searchServers(params: SearchParams): Promise<Server[]> {\n    const qs = new URLSearchParams();\n    qs.append(\"page\", params.page.toString());\n    qs.append(\"size\", params.size.toString());\n    if (params.q) qs.append(\"q\", params.q);\n    const res = await fetch(`${API_BASE}/servers/search?${qs}`, {\n      headers: authService.getAuthHeaders(),\n    });\n    if (!res.ok) throw new Error(\"Failed to search servers\");\n    return res.json();\n  }\n\n  async joinServer(id: number): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers/${id}/join`, {\n      method: \"POST\",\n      headers: authService.getAuthHeaders(),\n    });\n    if (!res.ok) throw new Error(\"Failed to join server\");\n    return res.json();\n  }\n\n  async kickMember(serverId: number, userId: number): Promise<void> {\n    const res = await fetch(`${API_BASE}/servers/${serverId}/kick`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ userId }),\n    });\n    if (!res.ok) throw new Error(\"Failed to kick member\");\n  }\n\n  async renameServer(serverId: number, name: string): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers/${serverId}/name`, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ name }),\n    });\n    if (!res.ok) throw new Error(\"Failed to rename server\");\n    return res.json();\n  }\n\n  async updateResetTime(serverId: number, resetTime: string): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers/${serverId}/reset-time`, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ resetTime }),\n    });\n    if (!res.ok) throw new Error(\"Failed to update reset time\");\n    return res.json();\n  }\n\n  async updateAdmin(serverId: number, userId: number, grant: boolean): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers/${serverId}/admins`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ userId, grant }),\n    });\n    if (!res.ok) throw new Error(\"Failed to update admin\");\n    return res.json();\n  }\n\n  async deleteServer(id: number): Promise<void> {\n    const res = await fetchWithAuth(`${API_BASE}/servers/${id}`, { method: \"DELETE\" });\n    if (!res.ok) throw new Error(\"Failed to delete server\");\n  }\n\n  async leaveServer(id: number): Promise<void> {\n    const res = await fetchWithAuth(`${API_BASE}/servers/${id}/leave`, { method: \"POST\" });\n    if (!res.ok) throw new Error(\"Failed to leave server\");\n  }\n\n  async inviteUser(serverId: number, receiverUserId: number): Promise<void> {\n    const res = await fetch(`${API_BASE}/servers/invites`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ serverId, receiverUserId }),\n    })\n    if (!res.ok) throw new Error(\"Failed to send invite\")\n  }\n\n  async updateDescription(serverId: number, description: string): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers/${serverId}/description`, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ description }),\n    })\n    if (!res.ok) throw new Error(\"Failed to update description\")\n    return res.json()\n  }\n\n  async updateMaxMembers(serverId: number, maxMembers: number | null): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers/${serverId}/max-members`, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ maxMembers }),\n    })\n    if (!res.ok) throw new Error(\"Failed to update max members\")\n    return res.json()\n  }\n\n  async toggleResetPaused(serverId: number, paused: boolean): Promise<Server> {\n    const res = await fetch(`${API_BASE}/servers/${serverId}/reset-paused`, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\", ...authService.getAuthHeaders() },\n      body: JSON.stringify({ paused }),\n    })\n    if (!res.ok) throw new Error(\"Failed to toggle reset pause\")\n    return res.json()\n  }\n}\n\nexport const serverService = new ServerService();\n",
            "timetable-service.ts": "import { authService } from \"./auth-service\"\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL\n\ninterface TimetableEntry {\n  id: number\n  user: string\n  slot: string\n  gameId: number\n  gameName: string\n  custom: boolean\n}\n\ninterface TimetableEntryRequest {\n  serverId: number\n  slot: string\n  defaultGameId?: number\n  customGameId?: number\n}\n\ninterface TimetableStats {\n  topGame: string\n  avgSlot: string\n  peakSlot: string\n  peakCount: number\n}\n\nclass TimetableService {\n  async getTimetable(serverId: number, game?: string, sortByGame?: boolean): Promise<TimetableEntry[]> {\n    const params = new URLSearchParams()\n    if (game) params.append(\"game\", game)\n    if (sortByGame) params.append(\"sortByGame\", \"true\")\n\n    const response = await fetch(`${API_BASE}/servers/${serverId}/timetable?${params}`, {\n      headers: authService.getAuthHeaders(),\n    })\n\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch timetable\")\n    }\n\n    return response.json()\n  }\n\n  async addEntry(data: TimetableEntryRequest): Promise<TimetableEntry> {\n    const response = await fetch(`${API_BASE}/servers/${data.serverId}/timetable`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...authService.getAuthHeaders(),\n      },\n      body: JSON.stringify(data),\n    })\n\n    if (!response.ok) {\n      throw new Error(\"Failed to add timetable entry\")\n    }\n\n    return response.json()\n  }\n\n  async getStats(serverId: number): Promise<TimetableStats> {\n    const response = await fetch(`${API_BASE}/servers/${serverId}/timetable/stats`, {\n      headers: authService.getAuthHeaders(),\n    })\n\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch stats\")\n    }\n\n    return response.json()\n  }\n}\n\nexport const timetableService = new TimetableService()\n",
            "utils.ts": "import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"
        }
    }
}